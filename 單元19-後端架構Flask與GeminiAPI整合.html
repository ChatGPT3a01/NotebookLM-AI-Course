<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å–®å…ƒ 19 - å¾Œç«¯æ¶æ§‹ Flask èˆ‡ Gemini API æ•´åˆ</title>
    <style>
        /* åŸºç¤è¨­å®š */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow: hidden;
            color: #333;
        }

        /* === å°èˆªåˆ— === */
        .nav-bar {
            position: fixed;
            top: 0; left: 0; right: 0;
            height: 60px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
            z-index: 10000;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .nav-title {
            font-size: 20px;
            font-weight: 700;
            color: #fff;
            letter-spacing: 1px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .nav-buttons { display: flex; gap: 12px; }

        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.4);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
        }

        /* === å°èˆªç®­é ­ === */
        .nav-arrow {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.25);
            color: white;
            width: 60px; height: 60px;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.4);
            font-size: 24px;
            cursor: pointer;
            z-index: 9000;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .nav-arrow:hover {
            background: rgba(255,255,255,0.5);
            transform: translateY(-50%) scale(1.1);
        }
        .prev-arrow { left: 30px; }
        .next-arrow { right: 30px; }
        .nav-arrow:disabled { opacity: 0.3; cursor: not-allowed; }

        /* === æŠ•å½±ç‰‡å®¹å™¨ === */
        .slide-container {
            width: 100%;
            height: 100vh;
            padding-top: 60px;
            position: relative;
            z-index: 1;
        }

        .slide {
            position: absolute;
            top: 60px; left: 0;
            width: 100%;
            height: calc(100vh - 60px);
            display: none;
            align-items: center;
            justify-content: center;
            padding: 40px;
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 10;
        }

        .slide.active {
            display: flex;
            opacity: 1;
            z-index: 20;
        }

        /* === å…§å®¹å¡ç‰‡ === */
        .content-card {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            padding: 45px 55px;
            max-width: 1400px;
            width: 95%;
            max-height: 88vh;
            overflow-y: auto;
            position: relative;
        }

        /* === å°é¢ç‰¹æ®Šæ¨£å¼ === */
        .cover-card {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(160deg, #667eea 0%, #764ba2 50%, #5a4f9e 100%);
            color: white;
        }

        .cover-card .unit-badge {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 30px;
            padding: 10px 30px;
            font-size: 16px;
            letter-spacing: 3px;
            margin-bottom: 30px;
            color: #fff;
        }

        .cover-card .final-badge {
            background: linear-gradient(135deg, #ffd700 0%, #ffaa00 100%);
            color: #333;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .cover-card h1 {
            font-size: 48px;
            background: linear-gradient(90deg, #fff 0%, #ffd700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            border: none;
        }

        .cover-card .subtitle {
            font-size: 24px;
            color: rgba(255, 255, 255, 0.9);
            max-width: 700px;
            line-height: 1.6;
        }

        .cover-card .tags {
            display: flex;
            gap: 15px;
            margin-top: 40px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .cover-card .tag {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
        }

        .instructor-info {
            margin-top: 40px;
            padding: 20px 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .instructor-info p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            margin: 5px 0;
        }

        /* å…¶ä»–é€šç”¨æ¨£å¼ */
        h1 { color: #667eea; font-size: 38px; margin-bottom: 20px; border-bottom: 4px solid #764ba2; padding-bottom: 12px; }
        h2 { color: #5a4f9e; font-size: 28px; margin: 25px 0 15px 0; }
        h3 { color: #667eea; font-size: 22px; margin: 20px 0 12px 0; }
        p, li { font-size: 18px; line-height: 1.85; color: #444; margin-bottom: 12px; }
        ul, ol { padding-left: 25px; }
        li { margin-bottom: 10px; }

        code {
            background: #f0f2f5;
            padding: 3px 10px;
            border-radius: 6px;
            font-family: 'Consolas', monospace;
            color: #764ba2;
            font-size: 0.95em;
        }

        .highlight {
            background: linear-gradient(120deg, #667eea 0%, #764ba2 100%);
            padding: 3px 10px;
            border-radius: 6px;
            font-weight: bold;
            color: #fff;
        }

        .box {
            padding: 20px 25px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 5px solid;
            font-size: 17px;
        }
        .info { background: #e8f4fd; border-color: #667eea; color: #4a5568; }
        .warning { background: #fff3cd; border-color: #ffc107; color: #856404; }
        .success { background: #d4edda; border-color: #28a745; color: #155724; }
        .tip { background: #f3e5f5; border-color: #764ba2; color: #4a148c; }
        .example { background: #e8f5e9; border-color: #4caf50; color: #1b5e20; }

        /* åŠŸèƒ½å¡ç‰‡ - å¸¶æ¼¸å±¤é‚Šæ¡† */
        .feature-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 15px 0;
            position: relative;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .feature-card::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 15px;
            padding: 3px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
        }
        .feature-card h3 {
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .feature-card .icon {
            font-size: 28px;
        }

        /* æ¯”è¼ƒè¡¨æ ¼ */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 16px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .comparison-table th, .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        .comparison-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 700;
        }
        .comparison-table tr:hover {
            background: #f8f9fa;
        }
        .comparison-table .check { color: #28a745; font-size: 20px; }
        .comparison-table .cross { color: #dc3545; font-size: 20px; }

        /* æ­¥é©Ÿå€å¡Š */
        .step-box {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 18px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
        }
        .step-box:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);
        }
        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            font-size: 18px;
            flex-shrink: 0;
        }

        /* å°æŠ€å·§æç¤ºæ¡† */
        .tip-box {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border: 2px dashed #764ba2;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        .tip-box h4 {
            color: #764ba2;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* æ¦‚å¿µå¡ç‰‡ç¶²æ ¼ */
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        .concept-card {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid #dee2e6;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        .concept-card:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.2);
        }
        .concept-card h3 {
            color: #667eea;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
        }
        .concept-card p {
            font-size: 16px;
            color: #555;
            margin-bottom: 0;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 15px;
        }

        /* æ¶æ§‹åœ–æ¨£å¼ */
        .architecture-diagram {
            background: linear-gradient(135deg, #1a1a2e 0%, #2d2d44 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            color: white;
        }
        .architecture-diagram h3 {
            color: #ffd700;
            margin-bottom: 20px;
            text-align: center;
        }
        .arch-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        .arch-box {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 20px 25px;
            text-align: center;
            min-width: 180px;
            border: 2px solid rgba(255,255,255,0.2);
        }
        .arch-box.frontend {
            border-color: #4fc3f7;
            background: rgba(79, 195, 247, 0.15);
        }
        .arch-box.backend {
            border-color: #81c784;
            background: rgba(129, 199, 132, 0.15);
        }
        .arch-box.ai {
            border-color: #ffd54f;
            background: rgba(255, 213, 79, 0.15);
        }
        .arch-box.routes {
            border-color: #ff8a65;
            background: rgba(255, 138, 101, 0.15);
        }
        .arch-box.services {
            border-color: #ba68c8;
            background: rgba(186, 104, 200, 0.15);
        }
        .arch-box h4 {
            color: white;
            margin-bottom: 10px;
            font-size: 18px;
        }
        .arch-box ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .arch-box li {
            color: rgba(255,255,255,0.85);
            font-size: 14px;
            margin: 5px 0;
        }
        .arch-arrow {
            font-size: 30px;
            color: #ffd700;
        }

        /* å°ˆæ¡ˆçµæ§‹æ¨¹ - ç›´å¼è¡¨æ ¼ */
        .project-tree {
            background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%);
            border-radius: 15px;
            padding: 25px 30px;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.8;
            color: #d4d4d4;
            overflow-x: auto;
        }
        .project-tree .folder {
            color: #ffd700;
        }
        .project-tree .file {
            color: #4fc3f7;
        }
        .project-tree .comment {
            color: #6a9955;
            font-style: italic;
        }
        /* ç›´å¼æª”æ¡ˆçµæ§‹è¡¨æ ¼ */
        .file-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 15px;
        }
        .file-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
        }
        .file-table td {
            padding: 10px 15px;
            border-bottom: 1px solid #eee;
            vertical-align: top;
        }
        .file-table tr:nth-child(even) {
            background: #f8f9ff;
        }
        .file-table .file-name {
            font-family: 'Consolas', monospace;
            color: #667eea;
            font-weight: 600;
            white-space: nowrap;
        }
        .file-table .file-desc {
            color: #555;
        }
        .file-table .folder-row {
            background: linear-gradient(90deg, #fff3cd 0%, #fff 100%) !important;
            font-weight: 600;
        }
        .file-table .folder-row td {
            color: #856404;
        }

        /* ç¨‹å¼ç¢¼å€å¡Š */
        .code-box {
            background: #1e1e1e;
            border-radius: 12px;
            padding: 20px 25px;
            margin: 15px 0;
            overflow-x: auto;
            position: relative;
        }
        .code-box::before {
            content: attr(data-lang);
            position: absolute;
            top: 10px;
            right: 15px;
            background: #667eea;
            color: white;
            padding: 3px 10px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: bold;
        }
        .code-box pre {
            color: #d4d4d4;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            margin: 0;
            line-height: 1.6;
        }
        .code-box .keyword { color: #569cd6; }
        .code-box .string { color: #ce9178; }
        .code-box .comment { color: #6a9955; }
        .code-box .function { color: #dcdcaa; }
        .code-box .decorator { color: #c586c0; }
        .code-box .class { color: #4ec9b0; }
        .code-box .number { color: #b5cea8; }

        /* API è«‹æ±‚æµç¨‹åœ– */
        .api-flow {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            color: white;
        }
        .api-flow h3 {
            color: white;
            text-align: center;
            margin-bottom: 25px;
        }
        .flow-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        .flow-step {
            background: rgba(255,255,255,0.15);
            border-radius: 10px;
            padding: 15px 20px;
            text-align: center;
            min-width: 100px;
            border: 1px solid rgba(255,255,255,0.3);
        }
        .flow-step .step-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }
        .flow-step p {
            color: white;
            font-size: 14px;
            margin: 0;
        }
        .flow-arrow {
            color: #ffd700;
            font-size: 24px;
        }

        /* SSE äº‹ä»¶æµç¤ºæ„ */
        .sse-diagram {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }
        .sse-diagram h3 {
            color: #fff;
            text-align: center;
            margin-bottom: 25px;
        }
        .sse-container {
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
            gap: 30px;
        }
        .sse-side {
            flex: 1;
            max-width: 45%;
        }
        .sse-side h4 {
            color: #ffd700;
            margin-bottom: 15px;
            text-align: center;
        }
        .sse-event {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 12px 15px;
            margin: 8px 0;
            border-left: 3px solid #4fc3f7;
        }
        .sse-event code {
            background: transparent;
            color: #4fc3f7;
            padding: 0;
        }
        .sse-event span {
            color: rgba(255,255,255,0.8);
            font-size: 14px;
        }
        .sse-arrow-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .sse-arrow {
            color: #ffd700;
            font-size: 28px;
        }
        .sse-label {
            color: rgba(255,255,255,0.7);
            font-size: 12px;
            writing-mode: vertical-rl;
        }

        /* é‡è©¦æ©Ÿåˆ¶æµç¨‹åœ– */
        .retry-flow {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            color: white;
        }
        .retry-flow h3 {
            color: white;
            text-align: center;
            margin-bottom: 25px;
        }
        .retry-steps {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        .retry-step {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 15px 20px;
            text-align: center;
            min-width: 120px;
        }
        .retry-step.success {
            background: rgba(40, 167, 69, 0.5);
            border: 2px solid #28a745;
        }
        .retry-step.fail {
            background: rgba(220, 53, 69, 0.5);
            border: 2px solid #dc3545;
        }
        .retry-step p {
            color: white;
            font-size: 14px;
            margin: 0;
        }

        /* é ç¢¼æŒ‡ç¤ºå™¨ */
        .indicators {
            position: fixed;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 4000;
            padding: 12px 25px;
            background: rgba(0,0,0,0.4);
            border-radius: 30px;
            backdrop-filter: blur(8px);
        }
        .dot {
            width: 10px;
            height: 10px;
            background: rgba(255,255,255,0.4);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .dot:hover { background: rgba(255,255,255,0.7); }
        .dot.active {
            background: #ffd700;
            transform: scale(1.3);
        }

        .page-number {
            position: absolute;
            bottom: 15px;
            right: 25px;
            color: #999;
            font-size: 14px;
        }

        /* æ»¾å‹•æ¢ç¾åŒ– */
        .content-card::-webkit-scrollbar { width: 8px; }
        .content-card::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .content-card::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
        }

        /* ä¸‹ä¸€å–®å…ƒæŒ‰éˆ• */
        .next-unit-btn {
            display: inline-block;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 35px;
            border-radius: 30px;
            text-decoration: none;
            font-size: 18px;
            font-weight: 600;
            border: none;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
        }
        .next-unit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
        }
        .back-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.4);
        }
        .back-btn:hover { background: rgba(255,255,255,0.3); }

        /* èª²ç¨‹å®Œæˆç¥è³€æ¨£å¼ */
        .celebration-card {
            text-align: center;
            background: linear-gradient(160deg, #ffd700 0%, #ff6b35 50%, #f7931e 100%);
            color: #333;
        }
        .celebration-card h1 {
            font-size: 52px;
            color: #333;
            border: none;
            text-shadow: 2px 2px 4px rgba(255,255,255,0.5);
            animation: celebrate 1s ease-in-out infinite alternate;
        }
        @keyframes celebrate {
            from { transform: scale(1); }
            to { transform: scale(1.02); }
        }
        .celebration-card .trophy {
            font-size: 100px;
            margin: 30px 0;
            animation: bounce 0.6s ease infinite alternate;
        }
        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-15px); }
        }
        .celebration-card .message {
            font-size: 24px;
            max-width: 700px;
            line-height: 1.8;
            margin: 0 auto;
        }
        .celebration-card .stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 40px;
        }
        .celebration-card .stat-item {
            background: rgba(255,255,255,0.3);
            padding: 20px 30px;
            border-radius: 15px;
            border: 2px solid rgba(255,255,255,0.5);
        }
        .celebration-card .stat-item .number {
            font-size: 48px;
            font-weight: bold;
            color: #333;
        }
        .celebration-card .stat-item .label {
            font-size: 16px;
            color: #555;
        }

        /* å·¥å» æ¨¡å¼ç¤ºæ„åœ– */
        .factory-diagram {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            color: white;
        }
        .factory-diagram h3 {
            color: #ffd700;
            text-align: center;
            margin-bottom: 25px;
        }
        .factory-layers {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        .factory-layer {
            padding: 20px 40px;
            border-radius: 10px;
            text-align: center;
            width: 80%;
            max-width: 500px;
        }
        .factory-layer.abstract {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 2px solid #ffd700;
        }
        .factory-layer.concrete {
            background: rgba(129, 199, 132, 0.3);
            border: 2px solid #81c784;
        }
        .factory-layer.factory {
            background: rgba(255, 213, 79, 0.3);
            border: 2px solid #ffd54f;
        }
        .factory-arrow {
            font-size: 24px;
            color: #ffd700;
        }

        /* === èª²ç¨‹æ¸¬é©—æ¨£å¼ === */
        .quiz-card {
            background: linear-gradient(160deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 50px;
        }
        .quiz-card h1 {
            color: white;
            border-bottom: 3px solid rgba(255,255,255,0.3);
            font-size: 36px;
        }
        .quiz-container {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            color: #333;
            max-height: 60vh;
            overflow-y: auto;
        }
        .quiz-question {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }
        .quiz-question h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 18px;
        }
        .quiz-option {
            display: block;
            padding: 12px 15px;
            margin: 8px 0;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
        }
        .quiz-option:hover {
            border-color: #667eea;
            background: #f0f2ff;
        }
        .quiz-option.selected {
            border-color: #667eea;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .quiz-option.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
        }
        .quiz-option.wrong {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }
        .quiz-btn {
            display: inline-block;
            padding: 15px 40px;
            background: linear-gradient(90deg, #ffd700 0%, #ff6b35 100%);
            color: #333;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px;
        }
        .quiz-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
        }
        .quiz-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        .quiz-result {
            text-align: center;
            padding: 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            margin-top: 20px;
        }
        .quiz-result h2 {
            color: white;
            margin-bottom: 15px;
        }
        .quiz-score {
            font-size: 72px;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .quiz-pass {
            color: #90EE90;
            font-size: 24px;
            margin: 15px 0;
        }
        .quiz-fail {
            color: #ffb3b3;
            font-size: 24px;
            margin: 15px 0;
        }

        /* === è­‰æ›¸è¼¸å…¥è¡¨å–® === */
        .cert-form {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            color: #333;
        }
        .cert-form h3 {
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        /* === è­‰æ›¸æ¨£å¼ === */
        .certificate-card {
            background: linear-gradient(160deg, #1a1a2e 0%, #16213e 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }
        .certificate {
            width: 900px;
            height: 640px;
            background: linear-gradient(135deg, #fffef0 0%, #fff8dc 50%, #ffefd5 100%);
            border: 15px solid;
            border-image: linear-gradient(135deg, #ffd700 0%, #b8860b 50%, #ffd700 100%) 1;
            border-radius: 5px;
            padding: 35px 50px;
            position: relative;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        }
        .certificate::before {
            content: '';
            position: absolute;
            inset: 10px;
            border: 2px solid #b8860b;
            pointer-events: none;
        }
        .certificate-header {
            text-align: center;
            margin-bottom: 10px;
        }
        .certificate-header h1 {
            font-size: 38px;
            color: #8b4513;
            font-weight: bold;
            margin: 0;
            border: none;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .certificate-subtitle {
            font-size: 16px;
            color: #b8860b;
            letter-spacing: 5px;
            margin-top: 8px;
        }
        .certificate-body {
            text-align: center;
            margin: 15px 0;
            flex: 1;
        }
        .certificate-body .recipient {
            font-size: 36px;
            font-weight: bold;
            color: #2c3e50;
            margin: 15px 0;
            font-family: 'Georgia', serif;
        }
        .certificate-body .org {
            font-size: 18px;
            color: #666;
            margin-bottom: 10px;
        }
        .certificate-body .congrats {
            font-size: 18px;
            color: #555;
            line-height: 1.6;
            max-width: 700px;
            margin: 0 auto;
        }
        .certificate-course {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 25px;
            border-radius: 30px;
            font-size: 16px;
            font-weight: bold;
            display: inline-block;
            margin: 15px 0;
        }
        .certificate-footer {
            display: flex;
            justify-content: space-between;
            margin-top: auto;
            padding-top: 15px;
            border-top: 2px dashed #b8860b;
        }
        .footer-item {
            text-align: center;
        }
        .footer-item .line {
            width: 180px;
            height: 2px;
            background: #333;
            margin: 10px auto 0;
        }
        .footer-item .label {
            font-size: 14px;
            color: #666;
        }
        .footer-item .value {
            font-size: 16px;
            color: #333;
            font-weight: 600;
            margin-top: 5px;
        }
        /* èªè­‰å°ç«  */
        .cert-seal {
            position: absolute;
            top: 50px;
            left: 50px;
            width: 120px;
            height: 120px;
            border: 4px solid #c41e3a;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.9);
            transform: rotate(-15deg);
            box-shadow: 0 4px 15px rgba(196, 30, 58, 0.3);
        }
        .cert-seal::before {
            content: '';
            position: absolute;
            inset: 6px;
            border: 2px dashed #c41e3a;
            border-radius: 50%;
        }
        .cert-seal .seal-icon {
            font-size: 28px;
            color: #c41e3a;
        }
        .cert-seal .seal-text {
            font-size: 11px;
            color: #c41e3a;
            font-weight: bold;
            text-align: center;
            margin-top: 3px;
            letter-spacing: 1px;
        }
        .cert-seal .seal-text-lg {
            font-size: 14px;
            color: #c41e3a;
            font-weight: bold;
        }
        .download-btns {
            margin-top: 30px;
            display: flex;
            gap: 20px;
        }
        .download-btn {
            padding: 15px 35px;
            background: linear-gradient(90deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
        }
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <!-- å°èˆªåˆ— -->
    <div class="nav-bar">
        <div class="nav-title">å–®å…ƒ 19 - å¾Œç«¯æ¶æ§‹ Flask èˆ‡ Gemini API æ•´åˆ</div>
        <div class="nav-buttons">
            <button class="nav-btn" onclick="goToSlide(0)">é¦–é </button>
            <button class="nav-btn" onclick="toggleFullscreen()">å…¨è¢å¹•</button>
            <a href="å–®å…ƒç›®æ¬¡.html" class="nav-btn">ç›®æ¬¡</a>
            <a href="https://www.facebook.com/groups/2754139931432955" target="_blank" class="nav-btn">FB</a>
            <a href="https://www.youtube.com/@Liang-yt02" target="_blank" class="nav-btn">YT</a>
        </div>
    </div>

    <!-- æŠ•å½±ç‰‡å…§å®¹ -->
    <div class="slide-container">

        <!-- Slide 1: å°é¢ -->
        <div class="slide active">
            <div class="content-card cover-card">
                <div class="unit-badge final-badge">æœ€çµ‚å–®å…ƒ - èª²ç¨‹å®Œçµç¯‡</div>
                <h1>å¾Œç«¯æ¶æ§‹<br>Flask èˆ‡ Gemini API æ•´åˆ</h1>
                <p class="subtitle">æ·±å…¥å‰–æ NotebookLM ç°¡å ±ç·¨ä¿®ç³»çµ±çš„å¾Œç«¯è¨­è¨ˆ<br>å¾æ¶æ§‹åˆ°å¯¦ç¾çš„å®Œæ•´æŠ€è¡“è§£æ</p>
                <div class="tags">
                    <span class="tag">Flask æ¡†æ¶</span>
                    <span class="tag">Gemini API</span>
                    <span class="tag">SSE ä¸²æµ</span>
                    <span class="tag">å·¥å» æ¨¡å¼</span>
                    <span class="tag">éŒ¯èª¤è™•ç†</span>
                </div>
                <div style="margin-top: 25px;">
                    <a href="https://github.com/ChatGPT3a01/NotebookLM-Slide-Edit-Tutorial" target="_blank" style="display: inline-block; background: linear-gradient(90deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 30px; border-radius: 25px; text-decoration: none; font-weight: 600; font-size: 16px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);">ğŸ”— GitHub å°ˆæ¡ˆä¸‹è¼‰ï¼ˆå«å¾Œç«¯åŸå§‹ç¢¼ï¼‰</a>
                </div>
                <div class="instructor-info">
                    <p>è¬›å¸«ï¼šæ›¾æ…¶è‰¯ï¼ˆé˜¿äº®è€å¸«ï¼‰</p>
                    <p>æ­å–œä½ ä¾†åˆ°èª²ç¨‹çš„æœ€å¾Œä¸€ç«™ï¼</p>
                </div>
            </div>
        </div>

        <!-- Slide 2: ä»€éº¼æ˜¯å¾Œç«¯ -->
        <div class="slide">
            <div class="content-card">
                <h1>ä»€éº¼æ˜¯å¾Œç«¯ï¼Ÿ</h1>
                <p style="font-size: 20px; margin-bottom: 25px;">å¾Œç«¯æ˜¯æ‡‰ç”¨ç¨‹å¼ä¸­ã€Œçœ‹ä¸è¦‹çš„å¹•å¾ŒåŠŸè‡£ã€</p>

                <div class="api-flow">
                    <h3>å¾Œç«¯çš„ä¸‰å¤§æ ¸å¿ƒä»»å‹™</h3>
                    <div class="flow-container">
                        <div class="flow-step">
                            <div class="step-icon">REQ</div>
                            <p>æ¥æ”¶è«‹æ±‚</p>
                        </div>
                        <span class="flow-arrow">-></span>
                        <div class="flow-step">
                            <div class="step-icon">CPU</div>
                            <p>è™•ç†è³‡æ–™</p>
                        </div>
                        <span class="flow-arrow">-></span>
                        <div class="flow-step">
                            <div class="step-icon">RES</div>
                            <p>å›å‚³çµæœ</p>
                        </div>
                    </div>
                </div>

                <div class="two-column">
                    <div class="feature-card">
                        <h3>å‰ç«¯ vs å¾Œç«¯</h3>
                        <ul style="font-size: 16px;">
                            <li><strong>å‰ç«¯</strong>ï¼šä½¿ç”¨è€…çœ‹åˆ°ã€æ“ä½œçš„ä»‹é¢</li>
                            <li><strong>å¾Œç«¯</strong>ï¼šè™•ç†é‚è¼¯ã€è³‡æ–™ã€AI å‘¼å«</li>
                            <li>å…©è€…é€é <strong>API</strong> æºé€š</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h3>å¾Œç«¯è² è²¬ä»€éº¼ï¼Ÿ</h3>
                        <ul style="font-size: 16px;">
                            <li>æ¥æ”¶å‰ç«¯å‚³ä¾†çš„åœ–ç‰‡</li>
                            <li>å‘¼å« Gemini AI è™•ç†</li>
                            <li>å°‡è™•ç†çµæœå›å‚³å‰ç«¯</li>
                        </ul>
                    </div>
                </div>

                <div class="box info">
                    <strong>ç”Ÿæ´»æ¯”å–»ï¼š</strong>å‰ç«¯åƒé¤å»³çš„æœå‹™ç”Ÿï¼ˆæ¥å¾…å®¢äººï¼‰ï¼Œå¾Œç«¯åƒå»šæˆ¿çš„å»šå¸«ï¼ˆè™•ç†é¤é»ï¼‰ï¼ŒAPI å°±æ˜¯é»é¤å–®ã€‚
                </div>
                <span class="page-number">2 / 31</span>
            </div>
        </div>

        <!-- Slide 3: Flask æ¡†æ¶ç°¡ä»‹ -->
        <div class="slide">
            <div class="content-card">
                <h1>Flask æ¡†æ¶ç°¡ä»‹</h1>

                <div class="feature-card">
                    <h3>ç‚ºä»€éº¼é¸æ“‡ Flaskï¼Ÿ</h3>
                    <p>Flask æ˜¯ Python æœ€å—æ­¡è¿çš„è¼•é‡ç´š Web æ¡†æ¶ä¹‹ä¸€ï¼Œé©åˆå¿«é€Ÿé–‹ç™¼ API æœå‹™ã€‚</p>
                </div>

                <div class="concept-grid" style="grid-template-columns: repeat(3, 1fr);">
                    <div class="concept-card">
                        <h3>è¼•é‡ç°¡æ½”</h3>
                        <p>æ ¸å¿ƒåªæœ‰è·¯ç”±å’Œè«‹æ±‚è™•ç†<br>ä¸å¼·åˆ¶ç‰¹å®šæ¶æ§‹<br>æ˜“æ–¼å­¸ç¿’ä¸Šæ‰‹</p>
                    </div>
                    <div class="concept-card">
                        <h3>éˆæ´»æ“´å±•</h3>
                        <p>éœ€è¦ä»€éº¼åŠ ä»€éº¼<br>è±å¯Œçš„æ“´å……å¥—ä»¶<br>è‡ªç”±é¸æ“‡å…ƒä»¶</p>
                    </div>
                    <div class="concept-card">
                        <h3>Python ç”Ÿæ…‹</h3>
                        <p>ç„¡ç¸«æ•´åˆ AI å‡½å¼åº«<br>è±å¯Œçš„è³‡æ–™è™•ç†å·¥å…·<br>ç¤¾ç¾¤è³‡æºè±å¯Œ</p>
                    </div>
                </div>

                <div class="code-box" data-lang="Python">
                    <pre><span class="comment"># æœ€ç°¡å–®çš„ Flask æ‡‰ç”¨</span>
<span class="keyword">from</span> flask <span class="keyword">import</span> Flask

app = Flask(__name__)

<span class="decorator">@app.route</span>(<span class="string">'/'</span>)
<span class="keyword">def</span> <span class="function">hello</span>():
    <span class="keyword">return</span> <span class="string">'Hello, World!'</span>

<span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:
    app.run(port=<span class="number">8099</span>)</pre>
                </div>
                <span class="page-number">3 / 31</span>
            </div>
        </div>

        <!-- Slide 4: å°ˆæ¡ˆçµæ§‹ç¸½è¦½ -->
        <div class="slide">
            <div class="content-card">
                <h1>å°ˆæ¡ˆçµæ§‹ç¸½è¦½</h1>
                <p style="font-size: 18px; margin-bottom: 20px;">å¾Œç«¯æ¡ç”¨æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œæ¸…æ™°åˆ†é›¢ä¸åŒè·è²¬</p>

                <table class="file-table">
                    <tr>
                        <th style="width: 35%;">æª”æ¡ˆ/è³‡æ–™å¤¾</th>
                        <th>èªªæ˜</th>
                    </tr>
                    <tr class="folder-row">
                        <td colspan="2">ğŸ“ backend/ï¼ˆå¾Œç«¯æ ¹ç›®éŒ„ï¼‰</td>
                    </tr>
                    <tr>
                        <td class="file-name">app.py</td>
                        <td class="file-desc">ä¸»ç¨‹å¼å…¥å£ï¼Œåˆå§‹åŒ– Flask æ‡‰ç”¨ç¨‹å¼</td>
                    </tr>
                    <tr>
                        <td class="file-name">config.py</td>
                        <td class="file-desc">è¨­å®šæª”è¼‰å…¥æ¨¡çµ„ï¼Œç®¡ç†ç³»çµ±è¨­å®š</td>
                    </tr>
                    <tr>
                        <td class="file-name">providers.yaml</td>
                        <td class="file-desc">AI æœå‹™å•†è¨­å®šæª”ï¼Œå­˜æ”¾ API é‡‘é‘°</td>
                    </tr>
                    <tr class="folder-row">
                        <td colspan="2">ğŸ“ generators/ï¼ˆAI ç”Ÿæˆå™¨æ¨¡çµ„ï¼‰</td>
                    </tr>
                    <tr>
                        <td class="file-name">base.py</td>
                        <td class="file-desc">æŠ½è±¡åŸºé¡ï¼Œå®šç¾©çµ±ä¸€ä»‹é¢</td>
                    </tr>
                    <tr>
                        <td class="file-name">gemini.py</td>
                        <td class="file-desc">Gemini API å¯¦ç¾é¡åˆ¥</td>
                    </tr>
                    <tr>
                        <td class="file-name">factory.py</td>
                        <td class="file-desc">å·¥å» æ¨¡å¼ï¼Œå‹•æ…‹å‰µå»ºç”Ÿæˆå™¨</td>
                    </tr>
                    <tr class="folder-row">
                        <td colspan="2">ğŸ“ routes/ï¼ˆAPI è·¯ç”±æ¨¡çµ„ï¼‰</td>
                    </tr>
                    <tr>
                        <td class="file-name">process.py</td>
                        <td class="file-desc">åœ–ç‰‡è™•ç†ç›¸é—œ API ç«¯é»</td>
                    </tr>
                    <tr>
                        <td class="file-name">ocr.py</td>
                        <td class="file-desc">OCR æ–‡å­—è¾¨è­˜ API ç«¯é»</td>
                    </tr>
                    <tr class="folder-row">
                        <td colspan="2">ğŸ“ services/ï¼ˆæ¥­å‹™æœå‹™æ¨¡çµ„ï¼‰</td>
                    </tr>
                    <tr>
                        <td class="file-name">image_service.py</td>
                        <td class="file-desc">åœ–ç‰‡è™•ç†æ¥­å‹™é‚è¼¯æœå‹™</td>
                    </tr>
                </table>

                <div class="box tip">
                    <strong>è¨­è¨ˆåŸå‰‡ï¼š</strong>æ¯å€‹è³‡æ–™å¤¾è² è²¬ä¸€å€‹æ˜ç¢ºçš„è·è²¬ï¼Œæ–¹ä¾¿ç¶­è­·å’Œæ“´å±•ã€‚
                </div>
                <span class="page-number">4 / 31</span>
            </div>
        </div>

        <!-- Slide 5: å„æ¨¡çµ„è·è²¬èªªæ˜ -->
        <div class="slide">
            <div class="content-card">
                <h1>å„æ¨¡çµ„è·è²¬èªªæ˜</h1>

                <div class="concept-grid" style="grid-template-columns: repeat(2, 1fr);">
                    <div class="concept-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                        <h3 style="color: white;">app.py - ä¸»ç¨‹å¼</h3>
                        <ul style="color: rgba(255,255,255,0.95); font-size: 15px;">
                            <li>Flask æ‡‰ç”¨ç¨‹å¼åˆå§‹åŒ–</li>
                            <li>è¨»å†Šæ‰€æœ‰è·¯ç”±è—åœ–</li>
                            <li>è¨­å®š CORS è·¨åŸŸ</li>
                            <li>å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨</li>
                        </ul>
                    </div>
                    <div class="concept-card" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white;">
                        <h3 style="color: white;">config.py - è¨­å®šæª”</h3>
                        <ul style="color: rgba(255,255,255,0.95); font-size: 15px;">
                            <li>è®€å– providers.yaml</li>
                            <li>ç®¡ç† API é‡‘é‘°</li>
                            <li>è¼‰å…¥æ¨¡å‹è¨­å®š</li>
                            <li>æä¾›è¨­å®šå­˜å–ä»‹é¢</li>
                        </ul>
                    </div>
                    <div class="concept-card" style="background: linear-gradient(135deg, #ffd700 0%, #ffaa00 100%); color: #333;">
                        <h3 style="color: #333;">generators/ - AI ç”Ÿæˆå™¨</h3>
                        <ul style="font-size: 15px;">
                            <li>æŠ½è±¡åŒ– AI å‘¼å«ä»‹é¢</li>
                            <li>å¯¦ç¾ä¸åŒ AI æœå‹™å•†</li>
                            <li>å·¥å» æ¨¡å¼å‹•æ…‹å‰µå»º</li>
                            <li>çµ±ä¸€éŒ¯èª¤è™•ç†</li>
                        </ul>
                    </div>
                    <div class="concept-card" style="background: linear-gradient(135deg, #e91e63 0%, #9c27b0 100%); color: white;">
                        <h3 style="color: white;">routes/ - API è·¯ç”±</h3>
                        <ul style="color: rgba(255,255,255,0.95); font-size: 15px;">
                            <li>å®šç¾© API ç«¯é»</li>
                            <li>è™•ç† HTTP è«‹æ±‚</li>
                            <li>å‘¼å«å°æ‡‰æœå‹™</li>
                            <li>å›å‚³ JSON/SSE</li>
                        </ul>
                    </div>
                </div>

                <div class="box info" style="margin-top: 20px;">
                    <strong>åˆ†å±¤æ¶æ§‹ï¼š</strong>Routes æ¥æ”¶è«‹æ±‚ -> Services è™•ç†æ¥­å‹™ -> Generators å‘¼å« AI
                </div>
                <span class="page-number">5 / 31</span>
            </div>
        </div>

        <!-- Slide 6: app.py è©³è§£ -->
        <div class="slide">
            <div class="content-card">
                <h1>app.py - ä¸»ç¨‹å¼å…¥å£</h1>

                <div class="code-box" data-lang="Python">
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Flask
<span class="keyword">from</span> flask_cors <span class="keyword">import</span> CORS
<span class="keyword">from</span> routes.process <span class="keyword">import</span> process_bp
<span class="keyword">from</span> routes.ocr <span class="keyword">import</span> ocr_bp

<span class="comment"># å»ºç«‹ Flask æ‡‰ç”¨</span>
app = Flask(__name__)

<span class="comment"># è¨­å®š CORSï¼ˆå…è¨±å‰ç«¯è·¨åŸŸå­˜å–ï¼‰</span>
CORS(app, resources={
    r<span class="string">"/api/*"</span>: {<span class="string">"origins"</span>: <span class="string">"*"</span>}
})

<span class="comment"># è¨»å†Šè·¯ç”±è—åœ–</span>
app.register_blueprint(process_bp, url_prefix=<span class="string">'/api'</span>)
app.register_blueprint(ocr_bp, url_prefix=<span class="string">'/api'</span>)

<span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:
    app.run(host=<span class="string">'0.0.0.0'</span>, port=<span class="number">8099</span>, debug=<span class="keyword">True</span>)</pre>
                </div>

                <div class="two-column">
                    <div class="box success" style="margin: 0;">
                        <strong>CORS æ˜¯ä»€éº¼ï¼Ÿ</strong><br>
                        è·¨ä¾†æºè³‡æºå…±ç”¨ï¼ˆCross-Origin Resource Sharingï¼‰ã€‚å…è¨±å‰ç«¯ï¼ˆ:5173ï¼‰å‘¼å«å¾Œç«¯ï¼ˆ:8099ï¼‰çš„ APIã€‚
                    </div>
                    <div class="box tip" style="margin: 0;">
                        <strong>è—åœ–æ˜¯ä»€éº¼ï¼Ÿ</strong><br>
                        Flask çš„æ¨¡çµ„åŒ–æ©Ÿåˆ¶ï¼Œå°‡ä¸åŒåŠŸèƒ½çš„è·¯ç”±åˆ†é–‹ç®¡ç†ï¼Œä¿æŒç¨‹å¼ç¢¼æ•´æ½”ã€‚
                    </div>
                </div>
                <span class="page-number">6 / 31</span>
            </div>
        </div>

        <!-- Slide 7: config.py è©³è§£ -->
        <div class="slide">
            <div class="content-card">
                <h1>config.py - è¨­å®šæª”ç®¡ç†</h1>

                <div class="two-column">
                    <div>
                        <h2>providers.yaml çµæ§‹</h2>
                        <div class="code-box" data-lang="YAML" style="margin: 10px 0;">
                            <pre><span class="keyword">active_provider</span>: gemini

<span class="keyword">providers</span>:
  <span class="keyword">gemini</span>:
    type: gemini
    api_key: <span class="string">"YOUR_KEY"</span>
    model_image_edit: <span class="string">gemini-2.5-flash-preview</span>
    model_text_gen: <span class="string">gemini-2.5-flash</span></pre>
                        </div>
                    </div>
                    <div>
                        <h2>config.py è¼‰å…¥é‚è¼¯</h2>
                        <div class="code-box" data-lang="Python" style="margin: 10px 0;">
                            <pre><span class="keyword">import</span> yaml

<span class="keyword">def</span> <span class="function">load_config</span>():
    <span class="keyword">with</span> open(<span class="string">'providers.yaml'</span>) <span class="keyword">as</span> f:
        config = yaml.safe_load(f)
    <span class="keyword">return</span> config

<span class="keyword">def</span> <span class="function">get_active_provider</span>():
    config = load_config()
    name = config[<span class="string">'active_provider'</span>]
    <span class="keyword">return</span> config[<span class="string">'providers'</span>][name]</pre>
                        </div>
                    </div>
                </div>

                <div class="box warning">
                    <strong>å®‰å…¨æé†’ï¼š</strong>API Key ä¸æ‡‰ç›´æ¥å¯«åœ¨ç¨‹å¼ç¢¼ä¸­ã€‚ä½¿ç”¨ YAML è¨­å®šæª”ï¼Œå¯åœ¨éƒ¨ç½²æ™‚æ›¿æ›ï¼Œä¸” .gitignore æ‡‰æ’é™¤æ­¤æª”æ¡ˆã€‚
                </div>
                <span class="page-number">7 / 31</span>
            </div>
        </div>

        <!-- Slide 8: è·¯ç”±è¨­è¨ˆæ¦‚è¦½ -->
        <div class="slide">
            <div class="content-card">
                <h1>è·¯ç”±è¨­è¨ˆ</h1>
                <p style="font-size: 18px; margin-bottom: 20px;">å¾Œç«¯æä¾›çš„ API ç«¯é»</p>

                <table class="comparison-table">
                    <tr>
                        <th>ç«¯é»</th>
                        <th>æ–¹æ³•</th>
                        <th>åŠŸèƒ½</th>
                        <th>å›æ‡‰æ ¼å¼</th>
                    </tr>
                    <tr>
                        <td><code>/api/process</code></td>
                        <td>POST</td>
                        <td>æ–‡å­—ç§»é™¤ + èƒŒæ™¯ä¿®å¾©</td>
                        <td>SSE ä¸²æµ</td>
                    </tr>
                    <tr>
                        <td><code>/api/ocr</code></td>
                        <td>POST</td>
                        <td>OCR æ–‡å­—è¾¨è­˜</td>
                        <td>JSON</td>
                    </tr>
                    <tr>
                        <td><code>/api/providers</code></td>
                        <td>GET</td>
                        <td>å–å¾—æœå‹™å•†åˆ—è¡¨</td>
                        <td>JSON</td>
                    </tr>
                    <tr>
                        <td><code>/api/providers</code></td>
                        <td>PUT</td>
                        <td>æ›´æ–°æœå‹™å•†è¨­å®š</td>
                        <td>JSON</td>
                    </tr>
                    <tr>
                        <td><code>/api/health</code></td>
                        <td>GET</td>
                        <td>å¥åº·æª¢æŸ¥</td>
                        <td>JSON</td>
                    </tr>
                </table>

                <div class="box info" style="margin-top: 20px;">
                    <strong>RESTful è¨­è¨ˆï¼š</strong>ä½¿ç”¨ HTTP æ–¹æ³•å€åˆ†æ“ä½œé¡å‹ - GET è®€å–ã€POST å‰µå»ºã€PUT æ›´æ–°ã€DELETE åˆªé™¤ã€‚
                </div>
                <span class="page-number">8 / 31</span>
            </div>
        </div>

        <!-- Slide 9: è™•ç†è·¯ç”±è©³è§£ -->
        <div class="slide">
            <div class="content-card">
                <h1>è™•ç†è·¯ç”± - process.py</h1>

                <div class="code-box" data-lang="Python">
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint, request, Response
<span class="keyword">from</span> generators.factory <span class="keyword">import</span> create_generator

process_bp = Blueprint(<span class="string">'process'</span>, __name__)

<span class="decorator">@process_bp.route</span>(<span class="string">'/process'</span>, methods=[<span class="string">'POST'</span>])
<span class="keyword">def</span> <span class="function">process_image</span>():
    <span class="comment"># å–å¾—ä¸Šå‚³çš„åœ–ç‰‡</span>
    image_data = request.json.get(<span class="string">'image'</span>)

    <span class="comment"># å»ºç«‹ AI ç”Ÿæˆå™¨</span>
    generator = create_generator()

    <span class="comment"># ä½¿ç”¨ SSE ä¸²æµå›å‚³çµæœ</span>
    <span class="keyword">def</span> <span class="function">generate</span>():
        <span class="keyword">for</span> event <span class="keyword">in</span> generator.remove_text(image_data):
            <span class="keyword">yield</span> f<span class="string">"data: {json.dumps(event)}\n\n"</span>

    <span class="keyword">return</span> Response(
        generate(),
        mimetype=<span class="string">'text/event-stream'</span>
    )</pre>
                </div>

                <div class="tip-box">
                    <h4>é—œéµè¨­è¨ˆ</h4>
                    <p>ä½¿ç”¨ <strong>SSE (Server-Sent Events)</strong> ä¸²æµå›å‚³è™•ç†é€²åº¦ï¼Œè®“å‰ç«¯èƒ½å³æ™‚é¡¯ç¤ºè™•ç†ç‹€æ…‹ã€‚</p>
                </div>
                <span class="page-number">9 / 31</span>
            </div>
        </div>

        <!-- Slide 10: OCR è·¯ç”±è©³è§£ -->
        <div class="slide">
            <div class="content-card">
                <h1>OCR è·¯ç”± - ocr.py</h1>

                <div class="code-box" data-lang="Python">
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint, request, jsonify
<span class="keyword">from</span> generators.factory <span class="keyword">import</span> create_generator

ocr_bp = Blueprint(<span class="string">'ocr'</span>, __name__)

<span class="decorator">@ocr_bp.route</span>(<span class="string">'/ocr'</span>, methods=[<span class="string">'POST'</span>])
<span class="keyword">def</span> <span class="function">perform_ocr</span>():
    <span class="keyword">try</span>:
        <span class="comment"># å–å¾—åœ–ç‰‡è³‡æ–™</span>
        image_data = request.json.get(<span class="string">'image'</span>)

        <span class="comment"># å»ºç«‹ç”Ÿæˆå™¨ä¸¦åŸ·è¡Œ OCR</span>
        generator = create_generator()
        result = generator.ocr(image_data)

        <span class="keyword">return</span> jsonify({
            <span class="string">'success'</span>: <span class="keyword">True</span>,
            <span class="string">'text_blocks'</span>: result
        })
    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:
        <span class="keyword">return</span> jsonify({
            <span class="string">'success'</span>: <span class="keyword">False</span>,
            <span class="string">'error'</span>: str(e)
        }), <span class="number">500</span></pre>
                </div>

                <div class="box success">
                    <strong>OCR å›å‚³æ ¼å¼ï¼š</strong>åŒ…å«æ¯å€‹æ–‡å­—å€å¡Šçš„å…§å®¹ã€ä½ç½®ï¼ˆx, yï¼‰ã€å¤§å°ï¼ˆwidth, heightï¼‰å’Œå­—é«”è³‡è¨Šã€‚
                </div>
                <span class="page-number">10 / 31</span>
            </div>
        </div>

        <!-- Slide 11: AI ç”Ÿæˆå™¨æ¶æ§‹ -->
        <div class="slide">
            <div class="content-card">
                <h1>AI ç”Ÿæˆå™¨æ¶æ§‹</h1>
                <p style="font-size: 18px; margin-bottom: 20px;">ä½¿ç”¨ç‰©ä»¶å°å‘è¨­è¨ˆï¼Œæ–¹ä¾¿æ“´å±•ä¸åŒ AI æœå‹™å•†</p>

                <div class="factory-diagram">
                    <h3>å·¥å» æ¨¡å¼æ¶æ§‹åœ–</h3>
                    <div class="factory-layers">
                        <div class="factory-layer abstract">
                            <strong>BaseGenerator (æŠ½è±¡åŸºé¡)</strong><br>
                            <span style="font-size: 14px;">å®šç¾© remove_text() å’Œ ocr() ä»‹é¢</span>
                        </div>
                        <div class="factory-arrow">|</div>
                        <div class="factory-arrow">V</div>
                        <div style="display: flex; gap: 20px;">
                            <div class="factory-layer concrete" style="width: auto; padding: 15px 25px;">
                                <strong>GeminiGenerator</strong><br>
                                <span style="font-size: 13px;">Gemini API å¯¦ç¾</span>
                            </div>
                            <div class="factory-layer concrete" style="width: auto; padding: 15px 25px;">
                                <strong>OpenAIGenerator</strong><br>
                                <span style="font-size: 13px;">OpenAI API å¯¦ç¾</span>
                            </div>
                            <div class="factory-layer concrete" style="width: auto; padding: 15px 25px;">
                                <strong>å…¶ä»–å¯¦ç¾...</strong><br>
                                <span style="font-size: 13px;">å¯è‡ªç”±æ“´å±•</span>
                            </div>
                        </div>
                        <div class="factory-arrow">^</div>
                        <div class="factory-arrow">|</div>
                        <div class="factory-layer factory">
                            <strong>GeneratorFactory (å·¥å» )</strong><br>
                            <span style="font-size: 14px;">æ ¹æ“šè¨­å®šå‹•æ…‹å‰µå»ºå°æ‡‰çš„ç”Ÿæˆå™¨</span>
                        </div>
                    </div>
                </div>
                <span class="page-number">11 / 31</span>
            </div>
        </div>

        <!-- Slide 12: æŠ½è±¡åŸºé¡ base.py -->
        <div class="slide">
            <div class="content-card">
                <h1>æŠ½è±¡åŸºé¡ - base.py</h1>

                <div class="code-box" data-lang="Python">
                    <pre><span class="keyword">from</span> abc <span class="keyword">import</span> ABC, abstractmethod
<span class="keyword">from</span> typing <span class="keyword">import</span> Generator, Dict, List

<span class="keyword">class</span> <span class="class">BaseGenerator</span>(ABC):
    <span class="string">"""AI ç”Ÿæˆå™¨çš„æŠ½è±¡åŸºé¡"""</span>

    <span class="keyword">def</span> <span class="function">__init__</span>(self, config: Dict):
        self.config = config
        self.api_key = config.get(<span class="string">'api_key'</span>)

    <span class="decorator">@abstractmethod</span>
    <span class="keyword">def</span> <span class="function">remove_text</span>(self, image_data: str) -> Generator:
        <span class="string">"""ç§»é™¤åœ–ç‰‡ä¸­çš„æ–‡å­—ï¼Œå›å‚³ SSE äº‹ä»¶ä¸²æµ"""</span>
        <span class="keyword">pass</span>

    <span class="decorator">@abstractmethod</span>
    <span class="keyword">def</span> <span class="function">ocr</span>(self, image_data: str) -> List[Dict]:
        <span class="string">"""OCR æ–‡å­—è¾¨è­˜ï¼Œå›å‚³æ–‡å­—å€å¡Šåˆ—è¡¨"""</span>
        <span class="keyword">pass</span></pre>
                </div>

                <div class="box info">
                    <strong>æŠ½è±¡æ–¹æ³•çš„å¥½è™•ï¼š</strong>å¼·åˆ¶æ‰€æœ‰å­é¡åˆ¥å¯¦ç¾ç›¸åŒçš„ä»‹é¢ï¼Œç¢ºä¿ä¸åŒ AI æœå‹™å•†çš„ç¨‹å¼ç¢¼å¯ä»¥äº’ç›¸æ›¿æ›ä½¿ç”¨ã€‚
                </div>
                <span class="page-number">12 / 31</span>
            </div>
        </div>

        <!-- Slide 13: Gemini å¯¦ç¾ gemini.py -->
        <div class="slide">
            <div class="content-card">
                <h1>Gemini å¯¦ç¾ - gemini.py</h1>

                <div class="code-box" data-lang="Python">
                    <pre><span class="keyword">import</span> google.generativeai <span class="keyword">as</span> genai
<span class="keyword">from</span> .base <span class="keyword">import</span> BaseGenerator

<span class="keyword">class</span> <span class="class">GeminiGenerator</span>(BaseGenerator):
    <span class="keyword">def</span> <span class="function">__init__</span>(self, config):
        <span class="keyword">super</span>().__init__(config)
        genai.configure(api_key=self.api_key)

        <span class="comment"># è¨­å®šæ¨¡å‹</span>
        self.image_model = config.get(<span class="string">'model_image_edit'</span>)
        self.text_model = config.get(<span class="string">'model_text_gen'</span>)

    <span class="keyword">def</span> <span class="function">remove_text</span>(self, image_data):
        <span class="comment"># å‘¼å« Gemini åœ–ç‰‡ç·¨è¼¯ API</span>
        model = genai.GenerativeModel(self.image_model)

        <span class="keyword">yield</span> {<span class="string">'status'</span>: <span class="string">'processing'</span>, <span class="string">'message'</span>: <span class="string">'ç§»é™¤æ–‡å­—ä¸­...'</span>}

        response = model.generate_content([
            <span class="string">"Remove all text from this image..."</span>,
            image_data
        ])

        <span class="keyword">yield</span> {<span class="string">'status'</span>: <span class="string">'complete'</span>, <span class="string">'image'</span>: response.image}</pre>
                </div>
                <span class="page-number">13 / 31</span>
            </div>
        </div>

        <!-- Slide 14: å·¥å» æ¨¡å¼ factory.py -->
        <div class="slide">
            <div class="content-card">
                <h1>å·¥å» æ¨¡å¼ - factory.py</h1>

                <div class="code-box" data-lang="Python">
                    <pre><span class="keyword">from</span> config <span class="keyword">import</span> get_active_provider
<span class="keyword">from</span> .gemini <span class="keyword">import</span> GeminiGenerator
<span class="comment"># from .openai import OpenAIGenerator  # æœªä¾†æ“´å±•</span>

<span class="comment"># ç”Ÿæˆå™¨é¡å‹æ˜ å°„è¡¨</span>
GENERATOR_MAP = {
    <span class="string">'gemini'</span>: GeminiGenerator,
    <span class="comment"># 'openai': OpenAIGenerator,</span>
}

<span class="keyword">def</span> <span class="function">create_generator</span>():
    <span class="string">"""æ ¹æ“šè¨­å®šæª”å‰µå»ºå°æ‡‰çš„ AI ç”Ÿæˆå™¨"""</span>

    <span class="comment"># è®€å–ç›®å‰å•Ÿç”¨çš„æœå‹™å•†è¨­å®š</span>
    provider_config = get_active_provider()
    provider_type = provider_config.get(<span class="string">'type'</span>)

    <span class="comment"># å¾æ˜ å°„è¡¨å–å¾—å°æ‡‰çš„é¡åˆ¥</span>
    generator_class = GENERATOR_MAP.get(provider_type)

    <span class="keyword">if not</span> generator_class:
        <span class="keyword">raise</span> ValueError(f<span class="string">"Unknown provider: {provider_type}"</span>)

    <span class="comment"># å‰µå»ºä¸¦å›å‚³ç”Ÿæˆå™¨å¯¦ä¾‹</span>
    <span class="keyword">return</span> generator_class(provider_config)</pre>
                </div>

                <div class="tip-box">
                    <h4>å·¥å» æ¨¡å¼çš„å„ªé»</h4>
                    <p>å‘¼å«è€…åªéœ€è¦ <code>create_generator()</code>ï¼Œä¸éœ€è¦çŸ¥é“å…·é«”ä½¿ç”¨å“ªå€‹ AI æœå‹™å•†ã€‚åˆ‡æ›æœå‹™å•†åªè¦ä¿®æ”¹è¨­å®šæª”ã€‚</p>
                </div>
                <span class="page-number">14 / 31</span>
            </div>
        </div>

        <!-- Slide 15: Gemini API æ•´åˆ - é‡‘é‘°é…ç½® -->
        <div class="slide">
            <div class="content-card">
                <h1>Gemini API æ•´åˆ</h1>
                <h2>API é‡‘é‘°é…ç½®</h2>

                <div class="step-box">
                    <span class="step-number">1</span>
                    <div>
                        <strong>å‰å¾€ Google AI Studio</strong><br>
                        é–‹å•Ÿ <code>https://aistudio.google.com/apikey</code> å–å¾— API Key
                    </div>
                </div>

                <div class="step-box">
                    <span class="step-number">2</span>
                    <div>
                        <strong>è¨­å®š providers.yaml</strong><br>
                        å°‡ API Key å¡«å…¥è¨­å®šæª”çš„ <code>api_key</code> æ¬„ä½
                    </div>
                </div>

                <div class="step-box">
                    <span class="step-number">3</span>
                    <div>
                        <strong>é€éå‰ç«¯è¨­å®šä»‹é¢</strong><br>
                        é»æ“Šé½’è¼ªåœ–ç¤ºï¼Œåœ¨è¨­å®šé é¢ç·¨è¼¯ API Keyï¼ˆæ¨è–¦æ–¹å¼ï¼‰
                    </div>
                </div>

                <div class="code-box" data-lang="Python">
                    <pre><span class="comment"># Gemini API åˆå§‹åŒ–</span>
<span class="keyword">import</span> google.generativeai <span class="keyword">as</span> genai

<span class="comment"># è¨­å®š API é‡‘é‘°</span>
genai.configure(api_key=<span class="string">"YOUR_API_KEY"</span>)

<span class="comment"># å»ºç«‹æ¨¡å‹å¯¦ä¾‹</span>
model = genai.GenerativeModel(<span class="string">'gemini-2.5-flash'</span>)</pre>
                </div>
                <span class="page-number">15 / 31</span>
            </div>
        </div>

        <!-- Slide 16: Gemini API - æ–‡å­—ç§»é™¤ -->
        <div class="slide">
            <div class="content-card">
                <h1>Gemini API - æ–‡å­—ç§»é™¤</h1>

                <div class="api-flow">
                    <h3>æ–‡å­—ç§»é™¤ API å‘¼å«æµç¨‹</h3>
                    <div class="flow-container">
                        <div class="flow-step">
                            <div class="step-icon">IMG</div>
                            <p>åŸå§‹åœ–ç‰‡</p>
                        </div>
                        <span class="flow-arrow">-></span>
                        <div class="flow-step">
                            <div class="step-icon">API</div>
                            <p>Gemini API</p>
                        </div>
                        <span class="flow-arrow">-></span>
                        <div class="flow-step">
                            <div class="step-icon">AI</div>
                            <p>æ–‡å­—åµæ¸¬</p>
                        </div>
                        <span class="flow-arrow">-></span>
                        <div class="flow-step">
                            <div class="step-icon">FIX</div>
                            <p>Inpainting</p>
                        </div>
                        <span class="flow-arrow">-></span>
                        <div class="flow-step">
                            <div class="step-icon">OK</div>
                            <p>ä¹¾æ·¨èƒŒæ™¯</p>
                        </div>
                    </div>
                </div>

                <div class="code-box" data-lang="Python">
                    <pre><span class="keyword">def</span> <span class="function">remove_text</span>(self, image_data):
    prompt = <span class="string">"""
    Remove ALL text, letters, numbers, and characters from this image.
    Fill the removed areas with appropriate background.
    Maintain the original style and colors.
    """</span>

    response = self.model.generate_content([
        prompt,
        {<span class="string">"mime_type"</span>: <span class="string">"image/png"</span>, <span class="string">"data"</span>: image_data}
    ])

    <span class="keyword">return</span> response.candidates[<span class="number">0</span>].content.parts[<span class="number">0</span>].inline_data</pre>
                </div>
                <span class="page-number">16 / 31</span>
            </div>
        </div>

        <!-- Slide 17: Gemini API - OCR -->
        <div class="slide">
            <div class="content-card">
                <h1>Gemini API - OCR æ–‡å­—è¾¨è­˜</h1>

                <div class="code-box" data-lang="Python">
                    <pre><span class="keyword">def</span> <span class="function">ocr</span>(self, image_data):
    prompt = <span class="string">"""
    Analyze this image and extract all text with their positions.
    Return JSON format:
    [
      {
        "text": "extracted text",
        "x": percentage from left (0-100),
        "y": percentage from top (0-100),
        "width": text block width percentage,
        "height": text block height percentage,
        "fontSize": estimated font size in pt
      }
    ]
    """</span>

    response = self.model.generate_content([
        prompt,
        {<span class="string">"mime_type"</span>: <span class="string">"image/png"</span>, <span class="string">"data"</span>: image_data}
    ])

    <span class="comment"># è§£æ JSON å›æ‡‰</span>
    <span class="keyword">return</span> json.loads(response.text)</pre>
                </div>

                <div class="box tip">
                    <strong>ä½ç½®ä½¿ç”¨ç™¾åˆ†æ¯”ï¼š</strong>ä½¿ç”¨ç›¸å°ä½ç½®ï¼ˆ0-100%ï¼‰è€Œéçµ•å°åƒç´ ï¼Œç¢ºä¿åœ¨ä¸åŒè§£æåº¦ä¸‹éƒ½èƒ½æ­£ç¢ºå®šä½æ–‡å­—æ–¹å¡Šã€‚
                </div>
                <span class="page-number">17 / 31</span>
            </div>
        </div>

        <!-- Slide 18: é‡è©¦æ©Ÿåˆ¶ -->
        <div class="slide">
            <div class="content-card">
                <h1>é‡è©¦æ©Ÿåˆ¶</h1>
                <p style="font-size: 18px; margin-bottom: 20px;">API å‘¼å«å¯èƒ½å› ç¶²è·¯å•é¡Œæˆ–æœå‹™æš«æ™‚ä¸å¯ç”¨è€Œå¤±æ•—ï¼Œéœ€è¦è‡ªå‹•é‡è©¦</p>

                <div class="retry-flow">
                    <h3>é‡è©¦æµç¨‹åœ–</h3>
                    <div class="retry-steps">
                        <div class="retry-step">
                            <p>ç¬¬ä¸€æ¬¡å˜—è©¦</p>
                        </div>
                        <span class="flow-arrow" style="color: white;">-></span>
                        <div class="retry-step fail">
                            <p>å¤±æ•—</p>
                        </div>
                        <span class="flow-arrow" style="color: white;">-></span>
                        <div class="retry-step">
                            <p>ç­‰å¾… 1 ç§’</p>
                        </div>
                        <span class="flow-arrow" style="color: white;">-></span>
                        <div class="retry-step">
                            <p>ç¬¬äºŒæ¬¡å˜—è©¦</p>
                        </div>
                        <span class="flow-arrow" style="color: white;">-></span>
                        <div class="retry-step success">
                            <p>æˆåŠŸï¼</p>
                        </div>
                    </div>
                </div>

                <div class="code-box" data-lang="Python">
                    <pre><span class="keyword">import</span> time
<span class="keyword">from</span> functools <span class="keyword">import</span> wraps

<span class="keyword">def</span> <span class="function">retry</span>(max_attempts=<span class="number">3</span>, delay=<span class="number">1</span>):
    <span class="keyword">def</span> <span class="function">decorator</span>(func):
        <span class="decorator">@wraps</span>(func)
        <span class="keyword">def</span> <span class="function">wrapper</span>(*args, **kwargs):
            <span class="keyword">for</span> attempt <span class="keyword">in</span> range(max_attempts):
                <span class="keyword">try</span>:
                    <span class="keyword">return</span> func(*args, **kwargs)
                <span class="keyword">except</span> Exception <span class="keyword">as</span> e:
                    <span class="keyword">if</span> attempt == max_attempts - <span class="number">1</span>:
                        <span class="keyword">raise</span>
                    time.sleep(delay * (<span class="number">2</span> ** attempt))  <span class="comment"># æŒ‡æ•¸é€€é¿</span>
        <span class="keyword">return</span> wrapper
    <span class="keyword">return</span> decorator</pre>
                </div>
                <span class="page-number">18 / 31</span>
            </div>
        </div>

        <!-- Slide 19: SSE ä»€éº¼æ˜¯ SSE -->
        <div class="slide">
            <div class="content-card">
                <h1>SSE (Server-Sent Events)</h1>
                <h2>ä»€éº¼æ˜¯ SSEï¼Ÿ</h2>

                <div class="feature-card">
                    <h3>å³æ™‚æ¨é€æŠ€è¡“</h3>
                    <p>SSE å…è¨±ä¼ºæœå™¨ä¸»å‹•å‘å®¢æˆ¶ç«¯æ¨é€è³‡æ–™ï¼Œéå¸¸é©åˆéœ€è¦å³æ™‚æ›´æ–°çš„å ´æ™¯ã€‚</p>
                </div>

                <div class="two-column">
                    <div class="concept-card">
                        <h3>å‚³çµ± HTTP</h3>
                        <ul style="font-size: 15px;">
                            <li>å®¢æˆ¶ç«¯ç™¼é€è«‹æ±‚</li>
                            <li>ä¼ºæœå™¨å›æ‡‰ä¸€æ¬¡</li>
                            <li>é€£ç·šé—œé–‰</li>
                            <li>éœ€é‡æ–°è«‹æ±‚æ‰èƒ½æ›´æ–°</li>
                        </ul>
                    </div>
                    <div class="concept-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                        <h3 style="color: white;">SSE</h3>
                        <ul style="font-size: 15px; color: rgba(255,255,255,0.95);">
                            <li>å®¢æˆ¶ç«¯å»ºç«‹é€£ç·š</li>
                            <li>ä¼ºæœå™¨æŒçºŒæ¨é€</li>
                            <li>é€£ç·šä¿æŒé–‹å•Ÿ</li>
                            <li>å³æ™‚æ”¶åˆ°æ›´æ–°</li>
                        </ul>
                    </div>
                </div>

                <div class="box success" style="margin-top: 20px;">
                    <strong>ç‚ºä»€éº¼ç”¨ SSEï¼Ÿ</strong>AI è™•ç†éœ€è¦æ™‚é–“ï¼Œé€é SSE å¯ä»¥å³æ™‚å›å ±è™•ç†é€²åº¦ï¼ˆ10%... 50%... 100%ï¼‰ï¼Œæå‡ä½¿ç”¨è€…é«”é©—ã€‚
                </div>
                <span class="page-number">19 / 31</span>
            </div>
        </div>

        <!-- Slide 20: Flask ä¸­çš„ SSE -->
        <div class="slide">
            <div class="content-card">
                <h1>Flask ä¸­çš„ SSE å¯¦ç¾</h1>

                <div class="code-box" data-lang="Python">
                    <pre><span class="keyword">from</span> flask <span class="keyword">import</span> Response
<span class="keyword">import</span> json

<span class="decorator">@app.route</span>(<span class="string">'/api/process'</span>, methods=[<span class="string">'POST'</span>])
<span class="keyword">def</span> <span class="function">process</span>():
    <span class="keyword">def</span> <span class="function">generate_events</span>():
        <span class="comment"># ç™¼é€é–‹å§‹äº‹ä»¶</span>
        <span class="keyword">yield</span> f<span class="string">"data: {json.dumps({'status': 'start'})}\n\n"</span>

        <span class="comment"># ç™¼é€é€²åº¦äº‹ä»¶</span>
        <span class="keyword">for</span> progress <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">101</span>, <span class="number">10</span>):
            <span class="keyword">yield</span> f<span class="string">"data: {json.dumps({'progress': progress})}\n\n"</span>

        <span class="comment"># ç™¼é€å®Œæˆäº‹ä»¶</span>
        <span class="keyword">yield</span> f<span class="string">"data: {json.dumps({'status': 'complete', 'result': '...'})}\n\n"</span>

    <span class="keyword">return</span> Response(
        generate_events(),
        mimetype=<span class="string">'text/event-stream'</span>,
        headers={
            <span class="string">'Cache-Control'</span>: <span class="string">'no-cache'</span>,
            <span class="string">'Connection'</span>: <span class="string">'keep-alive'</span>
        }
    )</pre>
                </div>

                <div class="box tip">
                    <strong>SSE æ ¼å¼ï¼š</strong>æ¯å€‹äº‹ä»¶ä»¥ <code>data: </code> é–‹é ­ï¼Œä»¥å…©å€‹æ›è¡Œç¬¦ <code>\n\n</code> çµæŸã€‚
                </div>
                <span class="page-number">20 / 31</span>
            </div>
        </div>

        <!-- Slide 21: å‰ç«¯æ¥æ”¶ SSE -->
        <div class="slide">
            <div class="content-card">
                <h1>å‰ç«¯æ¥æ”¶ SSE</h1>

                <div class="sse-diagram">
                    <h3>SSE äº‹ä»¶æµç¤ºæ„åœ–</h3>
                    <div class="sse-container">
                        <div class="sse-side">
                            <h4>å¾Œç«¯ (Flask)</h4>
                            <div class="sse-event">
                                <code>data: {"status": "start"}</code>
                            </div>
                            <div class="sse-event">
                                <code>data: {"progress": 30}</code>
                            </div>
                            <div class="sse-event">
                                <code>data: {"progress": 70}</code>
                            </div>
                            <div class="sse-event">
                                <code>data: {"status": "complete"}</code>
                            </div>
                        </div>
                        <div class="sse-arrow-container">
                            <span class="sse-arrow">-></span>
                            <span class="sse-arrow">-></span>
                            <span class="sse-arrow">-></span>
                            <span class="sse-arrow">-></span>
                        </div>
                        <div class="sse-side">
                            <h4>å‰ç«¯ (Vue)</h4>
                            <div class="sse-event">
                                <span>é¡¯ç¤ºã€Œè™•ç†ä¸­...ã€</span>
                            </div>
                            <div class="sse-event">
                                <span>æ›´æ–°é€²åº¦æ¢ 30%</span>
                            </div>
                            <div class="sse-event">
                                <span>æ›´æ–°é€²åº¦æ¢ 70%</span>
                            </div>
                            <div class="sse-event">
                                <span>é¡¯ç¤ºè™•ç†çµæœ</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="code-box" data-lang="JavaScript">
                    <pre><span class="comment">// å‰ç«¯ä½¿ç”¨ EventSource æ¥æ”¶ SSE</span>
<span class="keyword">const</span> eventSource = <span class="keyword">new</span> EventSource(<span class="string">'/api/process'</span>);

eventSource.onmessage = (event) => {
    <span class="keyword">const</span> data = JSON.parse(event.data);

    <span class="keyword">if</span> (data.progress) {
        updateProgressBar(data.progress);
    }
    <span class="keyword">if</span> (data.status === <span class="string">'complete'</span>) {
        showResult(data.result);
        eventSource.close();
    }
};</pre>
                </div>
                <span class="page-number">21 / 31</span>
            </div>
        </div>

        <!-- Slide 22: éŒ¯èª¤è™•ç† -->
        <div class="slide">
            <div class="content-card">
                <h1>éŒ¯èª¤è™•ç†</h1>

                <div class="concept-grid" style="grid-template-columns: repeat(3, 1fr);">
                    <div class="concept-card">
                        <h3>è¼¸å…¥é©—è­‰</h3>
                        <p>æª¢æŸ¥å¿…è¦åƒæ•¸<br>é©—è­‰è³‡æ–™æ ¼å¼<br>é™åˆ¶æª”æ¡ˆå¤§å°</p>
                    </div>
                    <div class="concept-card">
                        <h3>try-except</h3>
                        <p>æ•æ‰ API éŒ¯èª¤<br>è™•ç†ç¶²è·¯ç•°å¸¸<br>é˜²æ­¢ç¨‹å¼å´©æ½°</p>
                    </div>
                    <div class="concept-card">
                        <h3>æ—¥èªŒè¨˜éŒ„</h3>
                        <p>è¨˜éŒ„éŒ¯èª¤è¨Šæ¯<br>è¿½è¹¤å•é¡Œä¾†æº<br>æ–¹ä¾¿é™¤éŒ¯</p>
                    </div>
                </div>

                <div class="code-box" data-lang="Python">
                    <pre><span class="keyword">import</span> logging

logger = logging.getLogger(__name__)

<span class="decorator">@app.route</span>(<span class="string">'/api/process'</span>, methods=[<span class="string">'POST'</span>])
<span class="keyword">def</span> <span class="function">process</span>():
    <span class="comment"># 1. è¼¸å…¥é©—è­‰</span>
    <span class="keyword">if not</span> request.json <span class="keyword">or</span> <span class="string">'image'</span> <span class="keyword">not in</span> request.json:
        <span class="keyword">return</span> jsonify({<span class="string">'error'</span>: <span class="string">'Missing image data'</span>}), <span class="number">400</span>

    <span class="keyword">try</span>:
        <span class="comment"># 2. æ¥­å‹™é‚è¼¯</span>
        result = process_image(request.json[<span class="string">'image'</span>])
        <span class="keyword">return</span> jsonify(result)

    <span class="keyword">except</span> ValueError <span class="keyword">as</span> e:
        <span class="comment"># 3. æ—¥èªŒè¨˜éŒ„</span>
        logger.warning(f<span class="string">"Invalid input: {e}"</span>)
        <span class="keyword">return</span> jsonify({<span class="string">'error'</span>: str(e)}), <span class="number">400</span>

    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:
        logger.error(f<span class="string">"Unexpected error: {e}"</span>, exc_info=<span class="keyword">True</span>)
        <span class="keyword">return</span> jsonify({<span class="string">'error'</span>: <span class="string">'Internal server error'</span>}), <span class="number">500</span></pre>
                </div>
                <span class="page-number">22 / 31</span>
            </div>
        </div>

        <!-- Slide 23: HTTP ç‹€æ…‹ç¢¼ -->
        <div class="slide">
            <div class="content-card">
                <h1>å¸¸ç”¨ HTTP ç‹€æ…‹ç¢¼</h1>

                <table class="comparison-table">
                    <tr>
                        <th>ç‹€æ…‹ç¢¼</th>
                        <th>åç¨±</th>
                        <th>èªªæ˜</th>
                        <th>ä½¿ç”¨æ™‚æ©Ÿ</th>
                    </tr>
                    <tr>
                        <td><code>200</code></td>
                        <td>OK</td>
                        <td>è«‹æ±‚æˆåŠŸ</td>
                        <td>æ­£å¸¸å›æ‡‰</td>
                    </tr>
                    <tr>
                        <td><code>400</code></td>
                        <td>Bad Request</td>
                        <td>è«‹æ±‚æ ¼å¼éŒ¯èª¤</td>
                        <td>ç¼ºå°‘åƒæ•¸ã€æ ¼å¼ä¸æ­£ç¢º</td>
                    </tr>
                    <tr>
                        <td><code>401</code></td>
                        <td>Unauthorized</td>
                        <td>æœªæˆæ¬Š</td>
                        <td>API Key ç„¡æ•ˆ</td>
                    </tr>
                    <tr>
                        <td><code>429</code></td>
                        <td>Too Many Requests</td>
                        <td>è«‹æ±‚éæ–¼é »ç¹</td>
                        <td>è¶…é API é™é¡</td>
                    </tr>
                    <tr>
                        <td><code>500</code></td>
                        <td>Internal Server Error</td>
                        <td>ä¼ºæœå™¨éŒ¯èª¤</td>
                        <td>ç¨‹å¼ç•°å¸¸</td>
                    </tr>
                    <tr>
                        <td><code>503</code></td>
                        <td>Service Unavailable</td>
                        <td>æœå‹™ä¸å¯ç”¨</td>
                        <td>AI æœå‹™æš«æ™‚ç„¡æ³•ä½¿ç”¨</td>
                    </tr>
                </table>

                <div class="box info" style="margin-top: 20px;">
                    <strong>è¨­è¨ˆåŸå‰‡ï¼š</strong>æ­£ç¢ºä½¿ç”¨ç‹€æ…‹ç¢¼èƒ½å¹«åŠ©å‰ç«¯åˆ¤æ–·å¦‚ä½•è™•ç†å›æ‡‰ï¼Œæä¾›æ›´å¥½çš„éŒ¯èª¤æç¤ºçµ¦ä½¿ç”¨è€…ã€‚
                </div>
                <span class="page-number">23 / 31</span>
            </div>
        </div>

        <!-- Slide 24: å¦‚ä½•æ“´å±• - æ–°å¢ AI æœå‹™å•† -->
        <div class="slide">
            <div class="content-card">
                <h1>å¦‚ä½•æ“´å±• - æ–°å¢ AI æœå‹™å•†</h1>

                <div class="step-box">
                    <span class="step-number">1</span>
                    <div>
                        <strong>å»ºç«‹æ–°çš„ç”Ÿæˆå™¨é¡åˆ¥</strong><br>
                        åœ¨ <code>generators/</code> è³‡æ–™å¤¾å»ºç«‹ <code>openai.py</code>
                    </div>
                </div>

                <div class="code-box" data-lang="Python">
                    <pre><span class="comment"># generators/openai.py</span>
<span class="keyword">from</span> .base <span class="keyword">import</span> BaseGenerator
<span class="keyword">import</span> openai

<span class="keyword">class</span> <span class="class">OpenAIGenerator</span>(BaseGenerator):
    <span class="keyword">def</span> <span class="function">__init__</span>(self, config):
        <span class="keyword">super</span>().__init__(config)
        openai.api_key = self.api_key

    <span class="keyword">def</span> <span class="function">remove_text</span>(self, image_data):
        <span class="comment"># å¯¦ç¾ OpenAI çš„æ–‡å­—ç§»é™¤é‚è¼¯</span>
        ...

    <span class="keyword">def</span> <span class="function">ocr</span>(self, image_data):
        <span class="comment"># å¯¦ç¾ OpenAI çš„ OCR é‚è¼¯</span>
        ...</pre>
                </div>

                <div class="step-box">
                    <span class="step-number">2</span>
                    <div>
                        <strong>è¨»å†Šåˆ°å·¥å» </strong><br>
                        åœ¨ <code>factory.py</code> çš„ <code>GENERATOR_MAP</code> åŠ å…¥æ–°çš„å°æ‡‰
                    </div>
                </div>

                <div class="step-box">
                    <span class="step-number">3</span>
                    <div>
                        <strong>æ›´æ–°è¨­å®šæª”</strong><br>
                        åœ¨ <code>providers.yaml</code> åŠ å…¥æ–°æœå‹™å•†çš„è¨­å®š
                    </div>
                </div>
                <span class="page-number">24 / 31</span>
            </div>
        </div>

        <!-- Slide 25: å¦‚ä½•æ“´å±• - æ–°å¢ API ç«¯é» -->
        <div class="slide">
            <div class="content-card">
                <h1>å¦‚ä½•æ“´å±• - æ–°å¢ API ç«¯é»</h1>

                <div class="step-box">
                    <span class="step-number">1</span>
                    <div>
                        <strong>å»ºç«‹æ–°çš„è·¯ç”±è—åœ–</strong><br>
                        åœ¨ <code>routes/</code> è³‡æ–™å¤¾å»ºç«‹æ–°çš„ Python æª”æ¡ˆ
                    </div>
                </div>

                <div class="code-box" data-lang="Python">
                    <pre><span class="comment"># routes/translate.py - æ–°å¢ç¿»è­¯åŠŸèƒ½</span>
<span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint, request, jsonify
<span class="keyword">from</span> generators.factory <span class="keyword">import</span> create_generator

translate_bp = Blueprint(<span class="string">'translate'</span>, __name__)

<span class="decorator">@translate_bp.route</span>(<span class="string">'/translate'</span>, methods=[<span class="string">'POST'</span>])
<span class="keyword">def</span> <span class="function">translate_text</span>():
    text = request.json.get(<span class="string">'text'</span>)
    target_lang = request.json.get(<span class="string">'target_lang'</span>, <span class="string">'en'</span>)

    generator = create_generator()
    result = generator.translate(text, target_lang)

    <span class="keyword">return</span> jsonify({<span class="string">'translated'</span>: result})</pre>
                </div>

                <div class="step-box">
                    <span class="step-number">2</span>
                    <div>
                        <strong>åœ¨ app.py è¨»å†Šè—åœ–</strong><br>
                        <code>app.register_blueprint(translate_bp, url_prefix='/api')</code>
                    </div>
                </div>

                <div class="box success" style="margin-top: 15px;">
                    <strong>å°±é€™éº¼ç°¡å–®ï¼</strong>æ¨¡çµ„åŒ–è¨­è¨ˆè®“æ–°å¢åŠŸèƒ½è®Šå¾—éå¸¸å®¹æ˜“ï¼Œä¸æœƒå½±éŸ¿ç¾æœ‰ç¨‹å¼ç¢¼ã€‚
                </div>
                <span class="page-number">25 / 31</span>
            </div>
        </div>

        <!-- Slide 26: æœ¬ç« å°çµ -->
        <div class="slide">
            <div class="content-card">
                <h1>æœ¬ç« å°çµ</h1>

                <div class="concept-grid" style="grid-template-columns: repeat(2, 1fr);">
                    <div class="concept-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                        <h3 style="color: white;">å¾Œç«¯æ¶æ§‹</h3>
                        <ul style="color: rgba(255,255,255,0.95);">
                            <li>Flask è¼•é‡æ¡†æ¶</li>
                            <li>æ¨¡çµ„åŒ–å°ˆæ¡ˆçµæ§‹</li>
                            <li>RESTful API è¨­è¨ˆ</li>
                            <li>è—åœ–çµ„ç¹”è·¯ç”±</li>
                        </ul>
                    </div>
                    <div class="concept-card" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white;">
                        <h3 style="color: white;">AI ç”Ÿæˆå™¨</h3>
                        <ul style="color: rgba(255,255,255,0.95);">
                            <li>æŠ½è±¡åŸºé¡å®šç¾©ä»‹é¢</li>
                            <li>å·¥å» æ¨¡å¼å‰µå»ºå¯¦ä¾‹</li>
                            <li>æ˜“æ–¼æ“´å±•æ–°æœå‹™å•†</li>
                            <li>çµ±ä¸€éŒ¯èª¤è™•ç†</li>
                        </ul>
                    </div>
                    <div class="concept-card" style="background: linear-gradient(135deg, #ffd700 0%, #ffaa00 100%); color: #333;">
                        <h3 style="color: #333;">Gemini API</h3>
                        <ul>
                            <li>æ–‡å­—ç§»é™¤ Inpainting</li>
                            <li>OCR æ–‡å­—è¾¨è­˜</li>
                            <li>é‡è©¦æ©Ÿåˆ¶è™•ç†</li>
                            <li>API é‡‘é‘°ç®¡ç†</li>
                        </ul>
                    </div>
                    <div class="concept-card" style="background: linear-gradient(135deg, #e91e63 0%, #9c27b0 100%); color: white;">
                        <h3 style="color: white;">SSE ä¸²æµ</h3>
                        <ul style="color: rgba(255,255,255,0.95);">
                            <li>å³æ™‚æ¨é€è™•ç†é€²åº¦</li>
                            <li>æå‡ä½¿ç”¨è€…é«”é©—</li>
                            <li>Generator å‡½å¼å¯¦ç¾</li>
                            <li>å‰ç«¯ EventSource æ¥æ”¶</li>
                        </ul>
                    </div>
                </div>

                <div class="box tip" style="text-align: center; font-size: 18px; margin-top: 15px;">
                    <strong>æ­å–œï¼</strong>ä½ å·²ç¶“å®Œæˆäº†å¾Œç«¯æ¶æ§‹çš„å­¸ç¿’ï¼Œæ¥ä¸‹ä¾†æ˜¯èª²ç¨‹ç¸½çµï¼
                </div>
                <span class="page-number">26 / 31</span>
            </div>
        </div>

        <!-- Slide 27: æœ¬å–®å…ƒæ¶æ§‹çµ±æ•´ -->
        <div class="slide">
            <div class="content-card">
                <h1>ğŸ—ï¸ æœ¬å–®å…ƒæ¶æ§‹çµ±æ•´</h1>
                <p style="font-size: 18px; margin-bottom: 25px; text-align: center;">å¾Œç«¯æ¶æ§‹ Flask èˆ‡ Gemini API æ•´åˆçš„æ ¸å¿ƒçŸ¥è­˜é»</p>

                <table class="file-table" style="font-size: 14px;">
                    <tr>
                        <th style="width: 25%;">ä¸»é¡Œ</th>
                        <th style="width: 35%;">æ ¸å¿ƒæ¦‚å¿µ</th>
                        <th>é—œéµæŠ€è¡“</th>
                    </tr>
                    <tr class="folder-row">
                        <td>ğŸ“ å°ˆæ¡ˆçµæ§‹</td>
                        <td>æ¨¡çµ„åŒ–è¨­è¨ˆã€åˆ†å±¤æ¶æ§‹</td>
                        <td>app.pyã€routes/ã€generators/ã€services/</td>
                    </tr>
                    <tr>
                        <td>ğŸŒ Flask æ¡†æ¶</td>
                        <td>è¼•é‡ç´š Web æ¡†æ¶</td>
                        <td>Blueprint è·¯ç”±ã€CORS è·¨åŸŸã€RESTful API</td>
                    </tr>
                    <tr>
                        <td>ğŸ­ å·¥å» æ¨¡å¼</td>
                        <td>æŠ½è±¡åŸºé¡ + å‹•æ…‹å‰µå»º</td>
                        <td>BaseGeneratorã€GeminiGeneratorã€Factory</td>
                    </tr>
                    <tr>
                        <td>ğŸ¤– Gemini API</td>
                        <td>AI åœ–ç‰‡è™•ç†èƒ½åŠ›</td>
                        <td>Inpainting æ–‡å­—ç§»é™¤ã€OCR æ–‡å­—è¾¨è­˜</td>
                    </tr>
                    <tr>
                        <td>ğŸ“¡ SSE ä¸²æµ</td>
                        <td>å³æ™‚æ¨é€è™•ç†é€²åº¦</td>
                        <td>Generator å‡½å¼ã€EventSourceã€text/event-stream</td>
                    </tr>
                    <tr>
                        <td>ğŸ”„ éŒ¯èª¤è™•ç†</td>
                        <td>é‡è©¦æ©Ÿåˆ¶ã€ç•°å¸¸æ•ç²</td>
                        <td>æŒ‡æ•¸é€€é¿ã€API é™æµè™•ç†ã€çµ±ä¸€éŒ¯èª¤æ ¼å¼</td>
                    </tr>
                    <tr>
                        <td>âš™ï¸ è¨­å®šç®¡ç†</td>
                        <td>å¤–éƒ¨åŒ–é…ç½®</td>
                        <td>providers.yamlã€ç’°å¢ƒè®Šæ•¸ã€API Key ç®¡ç†</td>
                    </tr>
                </table>

                <div class="box success" style="text-align: center; margin-top: 15px;">
                    <strong>ğŸ¯ æœ¬å–®å…ƒå­¸ç¿’æˆæœï¼š</strong>æŒæ¡ Flask å¾Œç«¯é–‹ç™¼èˆ‡ Gemini API æ•´åˆçš„å®Œæ•´æŠ€è¡“æ£§ï¼
                </div>
                <span class="page-number">27 / 31</span>
            </div>
        </div>

        <!-- Slide 28: èª²ç¨‹å®Œæˆç¥è³€é  -->
        <div class="slide">
            <div class="content-card celebration-card">
                <div class="trophy">&#127942;</div>
                <h1>æ­å–œå®Œæˆå…¨éƒ¨èª²ç¨‹ï¼</h1>
                <p class="message">
                    å¾ NotebookLM çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œåˆ°ç°¡å ±è£½ä½œã€ç·¨è¼¯å·¥å…·ã€è‡ªå‹•åŒ–ç³»çµ±ï¼Œ<br>
                    å†åˆ°æ·±å…¥çš„æŠ€è¡“æ¶æ§‹è§£æï¼Œä½ å·²ç¶“æŒæ¡äº†å®Œæ•´çš„çŸ¥è­˜é«”ç³»ï¼
                </p>
                <p style="margin-top: 40px; font-size: 20px; color: #555;">
                    ç¾åœ¨ï¼Œä½ å·²ç¶“å…·å‚™äº†é‹ç”¨ NotebookLM å‰µé€ é«˜å“è³ªå…§å®¹çš„èƒ½åŠ›ï¼Œ<br>
                    ä»¥åŠç†è§£å’Œæ“´å±• AI è‡ªå‹•åŒ–ç³»çµ±çš„æŠ€è¡“åŸºç¤ï¼
                </p>
                <p style="margin-top: 30px; font-size: 18px; color: #666;">
                    æœŸå¾…ä½ é‹ç”¨æ‰€å­¸ï¼Œå‰µé€ æ›´å¤šç²¾å½©çš„ AI æ‡‰ç”¨ï¼
                </p>
                <span class="page-number" style="color: #888;">28 / 31</span>
            </div>
        </div>

        <!-- Slide 29: çµå°¾é  -->
        <div class="slide">
            <div class="content-card cover-card">
                <h1 style="font-size: 42px;">æ„Ÿè¬ä½ çš„å­¸ç¿’ï¼</h1>
                <p class="subtitle" style="font-size: 24px; margin-top: 30px;">
                    NotebookLM é€²éšèª²ç¨‹ç³»åˆ—
                </p>
                <p class="subtitle" style="font-size: 18px; margin-top: 25px; line-height: 2;">
                    å¸Œæœ›é€™ç³»åˆ—èª²ç¨‹å°ä½ æœ‰æ‰€å¹«åŠ©<br>
                    æœŸå¾…ä½ é‹ç”¨æ‰€å­¸å‰µé€ æ›´å¤šç²¾å½©å…§å®¹ï¼
                </p>
                <div class="tags" style="margin-top: 40px;">
                    <span class="tag">NotebookLM</span>
                    <span class="tag">AI ç°¡å ±è£½ä½œ</span>
                    <span class="tag">PDF ç·¨è¼¯</span>
                    <span class="tag">è‡ªå‹•åŒ–ç³»çµ±</span>
                    <span class="tag">å¾Œç«¯é–‹ç™¼</span>
                </div>
                <div style="margin-top: 50px; display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                    <a href="å–®å…ƒç›®æ¬¡.html" class="next-unit-btn" onclick="event.stopPropagation();">å›åˆ°ç›®æ¬¡</a>
                    <a href="å°é¢.html" class="next-unit-btn back-btn" onclick="event.stopPropagation();">å›åˆ°å°é¢</a>
                </div>
                <div style="margin-top: 30px;">
                    <button class="next-unit-btn" onclick="goToSlide(29); event.stopPropagation();" style="border: none; cursor: pointer;">ğŸ“œ å–å¾—èª²ç¨‹è­‰æ›¸</button>
                </div>
                <span class="page-number" style="color: rgba(255,255,255,0.6);">29 / 31</span>
            </div>
        </div>

        <!-- Slide 30: èª²ç¨‹æ¸¬é©— -->
        <div class="slide">
            <div class="content-card quiz-card">
                <h1>ğŸ“ èª²ç¨‹èªè­‰æ¸¬é©—</h1>
                <p style="text-align: center; font-size: 18px; margin-bottom: 10px;">
                    é€šéæ¸¬é©—ï¼ˆ80åˆ†ä»¥ä¸Šï¼‰å³å¯ç²å¾—èª²ç¨‹å®Œæˆè­‰æ›¸ï¼
                </p>

                <div id="quizContainer" class="quiz-container">
                    <!-- é¡Œç›®æœƒç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
                </div>

                <div id="quizResult" class="quiz-result hidden">
                    <h2>æ¸¬é©—çµæœ</h2>
                    <div class="quiz-score" id="scoreDisplay">0</div>
                    <div id="resultMessage"></div>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button id="submitQuizBtn" class="quiz-btn" onclick="submitQuiz()">é€å‡ºç­”æ¡ˆ</button>
                    <button id="retryQuizBtn" class="quiz-btn hidden" onclick="resetQuiz()">é‡æ–°ä½œç­”</button>
                    <button id="getCertBtn" class="quiz-btn hidden" onclick="goToSlide(30)">å–å¾—è­‰æ›¸ â†’</button>
                </div>

                <span class="page-number" style="color: rgba(255,255,255,0.6);">30 / 31</span>
            </div>
        </div>

        <!-- Slide 31: è­‰æ›¸ç”Ÿæˆ -->
        <div class="slide">
            <div class="content-card certificate-card">

                <!-- è¼¸å…¥è¡¨å–® -->
                <div id="certForm" class="cert-form" style="width: 500px;">
                    <h3>ğŸ“ å¡«å¯«è­‰æ›¸è³‡è¨Š</h3>
                    <div class="form-group">
                        <label for="recipientName">å§“å *</label>
                        <input type="text" id="recipientName" placeholder="è«‹è¼¸å…¥æ‚¨çš„å§“å" required>
                    </div>
                    <div class="form-group">
                        <label for="recipientOrg">å–®ä½ï¼ˆé¸å¡«ï¼‰</label>
                        <input type="text" id="recipientOrg" placeholder="ä¾‹å¦‚ï¼šXXå…¬å¸ / XXå­¸æ ¡">
                    </div>
                    <div style="text-align: center;">
                        <button class="quiz-btn" onclick="generateCertificate()">ç”Ÿæˆè­‰æ›¸</button>
                    </div>
                </div>

                <!-- è­‰æ›¸é¡¯ç¤º -->
                <div id="certificateDisplay" class="hidden">
                    <div id="certificate" class="certificate">
                        <div class="certificate-header">
                            <h1>NotebookLM AI èƒ½åŠ›èªè­‰è­‰æ›¸</h1>
                            <div class="certificate-subtitle">CERTIFICATE OF ACHIEVEMENT</div>
                        </div>
                        <div class="certificate-body">
                            <p style="font-size: 18px; color: #888;">èŒ²è­‰æ˜</p>
                            <div class="recipient" id="certName">å­¸å“¡å§“å</div>
                            <div class="org" id="certOrg"></div>
                            <p class="congrats">
                                æ­å–œæ‚¨å®Œæˆ 6 å°æ™‚çš„å°ˆæ¥­èª²ç¨‹å­¸ç¿’ä¸¦é€šéèªè­‰æ¸¬é©—
                            </p>
                            <div class="certificate-course">
                                NotebookLM AI å…¨èƒ½æ™ºæ…§ç‹ï¼šçªç ´å‰ç»æœªä¾†å·¥ä½œæµ
                            </div>
                        </div>
                        <!-- èªè­‰å°ç«  -->
                        <div class="cert-seal">
                            <div class="seal-icon">âœ“</div>
                            <div class="seal-text-lg">CERTIFIED</div>
                            <div class="seal-text">èªè­‰é€šé</div>
                        </div>

                        <div class="certificate-footer">
                            <div class="footer-item">
                                <div class="label">ç™¼è­‰æ—¥æœŸ</div>
                                <div class="value" id="certDate"></div>
                                <div class="line"></div>
                            </div>
                            <div class="footer-item">
                                <div class="label">ç™¼è­‰å–®ä½èˆ‡è¬›å¸«</div>
                                <div class="value">åœ‹ç«‹æ¸…è¯å¤§å­¸æ¨å»£ä¸­å¿ƒ<br>æ›¾æ…¶è‰¯ è¬›å¸«</div>
                                <div class="line"></div>
                            </div>
                        </div>
                    </div>

                    <div class="download-btns">
                        <button class="download-btn" onclick="downloadCertificate()">
                            ğŸ“¥ ä¸‹è¼‰è­‰æ›¸ï¼ˆPNGï¼‰
                        </button>
                        <button class="download-btn" style="background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);" onclick="goToSlide(28)">
                            â† è¿”å›çµå°¾é 
                        </button>
                    </div>
                </div>

                <span class="page-number" style="color: rgba(255,255,255,0.6);">31 / 31</span>
            </div>
        </div>

    </div>

    <!-- å°èˆªç®­é ­ -->
    <button class="nav-arrow prev-arrow" id="prevBtn" onclick="changeSlide(-1)">&#10094;</button>
    <button class="nav-arrow next-arrow" id="nextBtn" onclick="changeSlide(1)">&#10095;</button>

    <!-- é ç¢¼æŒ‡ç¤ºå™¨ -->
    <div class="indicators" id="indicatorContainer"></div>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;

        function init() {
            createIndicators();
            showSlide(0);
            updateButtons();
            document.addEventListener('keydown', handleKeydown);
        }

        function handleKeydown(e) {
            if (e.key === 'ArrowLeft') changeSlide(-1);
            if (e.key === 'ArrowRight') changeSlide(1);
            if (e.key === 'Home') goToSlide(0);
            if (e.key === 'End') goToSlide(totalSlides - 1);
        }

        function createIndicators() {
            const container = document.getElementById('indicatorContainer');
            container.innerHTML = '';
            slides.forEach((_, index) => {
                const dot = document.createElement('div');
                dot.className = 'dot';
                dot.onclick = () => goToSlide(index);
                container.appendChild(dot);
            });
        }

        function showSlide(index) {
            if (index < 0) index = 0;
            if (index >= totalSlides) index = totalSlides - 1;

            slides.forEach(slide => slide.classList.remove('active'));
            slides[index].classList.add('active');
            currentSlide = index;

            const dots = document.querySelectorAll('.dot');
            dots.forEach((dot, idx) => {
                dot.classList.toggle('active', idx === index);
            });

            updateButtons();
        }

        function changeSlide(direction) {
            showSlide(currentSlide + direction);
        }

        function goToSlide(index) {
            showSlide(index);
        }

        function updateButtons() {
            document.getElementById('prevBtn').disabled = currentSlide === 0;
            document.getElementById('nextBtn').disabled = currentSlide === totalSlides - 1;
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }

        // ========== èª²ç¨‹æ¸¬é©—ç³»çµ± ==========
        const quizQuestions = [
            {
                question: "NotebookLM æ˜¯ç”±å“ªå®¶å…¬å¸é–‹ç™¼çš„ AI å·¥å…·ï¼Ÿ",
                options: ["Microsoft", "Google", "OpenAI", "Apple"],
                answer: 1
            },
            {
                question: "NotebookLM çš„ã€ŒèªéŸ³æ‘˜è¦ã€åŠŸèƒ½æœƒç”Ÿæˆä»€éº¼é¡å‹çš„å…§å®¹ï¼Ÿ",
                options: ["æ–‡å­—å ±å‘Š", "Podcast é¢¨æ ¼çš„éŸ³è¨Šå°è©±", "å½±ç‰‡ç°¡å ±", "åœ–è¡¨åˆ†æ"],
                answer: 1
            },
            {
                question: "åœ¨ NotebookLM ä¸­ï¼Œä¸€å€‹ç­†è¨˜æœ¬æœ€å¤šå¯ä»¥æ–°å¢å¹¾å€‹ä¾†æºï¼Ÿ",
                options: ["10 å€‹", "25 å€‹", "50 å€‹", "100 å€‹"],
                answer: 2
            },
            {
                question: "NotebookLM æ”¯æ´å“ªç¨®å½±ç‰‡å¹³å°çš„é€£çµä½œç‚ºä¾†æºï¼Ÿ",
                options: ["Vimeo", "TikTok", "YouTube", "Bilibili"],
                answer: 2
            },
            {
                question: "ä½¿ç”¨ NotebookLM ç”Ÿæˆã€Œå¿ƒæ™ºåœ–ã€æ™‚ï¼Œè¼¸å‡ºçš„æ ¼å¼æ˜¯ä»€éº¼ï¼Ÿ",
                options: ["PNG åœ–ç‰‡", "PDF æ–‡ä»¶", "JSON çµæ§‹åŒ–è³‡æ–™", "Word æ–‡ä»¶"],
                answer: 2
            },
            {
                question: "åœ¨æœ¬èª²ç¨‹ä¸­ï¼Œç”¨æ–¼ç°¡å ±ç·¨è¼¯çš„ç·šä¸Šå·¥å…·æ˜¯ï¼Ÿ",
                options: ["Canva", "DeckEdit", "PowerPoint Online", "Prezi"],
                answer: 1
            },
            {
                question: "NotebookLM è‡ªå‹•åŒ–ç³»çµ±çš„å‰ç«¯æ¡†æ¶ä½¿ç”¨çš„æ˜¯ï¼Ÿ",
                options: ["React", "Angular", "Vue 3", "Svelte"],
                answer: 2
            },
            {
                question: "å¾Œç«¯æ¶æ§‹ä¸­ï¼Œç”¨æ–¼è™•ç† AI åœ–ç‰‡çš„ API æ˜¯ï¼Ÿ",
                options: ["ChatGPT API", "Claude API", "Gemini API", "DALL-E API"],
                answer: 2
            },
            {
                question: "NotebookLM çš„ã€Œæ¸¬é©—ã€åŠŸèƒ½å¯ä»¥è‡ªå‹•ç”Ÿæˆä»€éº¼ï¼Ÿ",
                options: ["æ˜¯éé¡Œ", "é¸æ“‡é¡Œ", "å¡«ç©ºé¡Œ", "ä»¥ä¸Šçš†æ˜¯"],
                answer: 3
            },
            {
                question: "NotebookLM å¯ä»¥å°‡å“ªç¨®é¡å‹çš„å…§å®¹è½‰æ›æˆ Podcast é¢¨æ ¼çš„éŸ³è¨Šï¼Ÿ",
                options: ["åªèƒ½è™•ç† PDF", "åªèƒ½è™•ç†ç¶²é ", "åªèƒ½è™•ç†å½±ç‰‡", "PDFã€ç¶²é ã€YouTube ç­‰å¤šç¨®ä¾†æº"],
                answer: 3
            }
        ];

        let userAnswers = [];
        let quizSubmitted = false;

        function initQuiz() {
            const container = document.getElementById('quizContainer');
            if (!container) return;

            container.innerHTML = '';
            userAnswers = new Array(quizQuestions.length).fill(-1);

            quizQuestions.forEach((q, qIndex) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'quiz-question';
                questionDiv.innerHTML = `
                    <h4>ç¬¬ ${qIndex + 1} é¡Œï¼š${q.question}</h4>
                    <div class="options">
                        ${q.options.map((opt, oIndex) => `
                            <label class="quiz-option" data-q="${qIndex}" data-o="${oIndex}" onclick="selectOption(${qIndex}, ${oIndex})">
                                ${String.fromCharCode(65 + oIndex)}. ${opt}
                            </label>
                        `).join('')}
                    </div>
                `;
                container.appendChild(questionDiv);
            });
        }

        function selectOption(qIndex, oIndex) {
            if (quizSubmitted) return;

            userAnswers[qIndex] = oIndex;

            // æ›´æ–°é¸é …æ¨£å¼
            const options = document.querySelectorAll(`[data-q="${qIndex}"]`);
            options.forEach((opt, idx) => {
                opt.classList.toggle('selected', idx === oIndex);
            });
        }

        function submitQuiz() {
            // æª¢æŸ¥æ˜¯å¦å…¨éƒ¨ä½œç­”
            const unanswered = userAnswers.filter(a => a === -1).length;
            if (unanswered > 0) {
                alert(`é‚„æœ‰ ${unanswered} é¡Œæœªä½œç­”ï¼Œè«‹å…¨éƒ¨ä½œç­”å¾Œå†é€å‡ºï¼`);
                return;
            }

            quizSubmitted = true;

            // è¨ˆç®—åˆ†æ•¸
            let correctCount = 0;
            quizQuestions.forEach((q, idx) => {
                const isCorrect = userAnswers[idx] === q.answer;
                if (isCorrect) correctCount++;

                // æ¨™è¨˜æ­£ç¢º/éŒ¯èª¤
                const options = document.querySelectorAll(`[data-q="${idx}"]`);
                options.forEach((opt, oIdx) => {
                    opt.classList.remove('selected');
                    if (oIdx === q.answer) {
                        opt.classList.add('correct');
                    } else if (oIdx === userAnswers[idx] && !isCorrect) {
                        opt.classList.add('wrong');
                    }
                });
            });

            const score = correctCount * 10;
            const passed = score >= 80;

            // é¡¯ç¤ºçµæœ
            document.getElementById('quizResult').classList.remove('hidden');
            document.getElementById('scoreDisplay').textContent = score;
            document.getElementById('resultMessage').innerHTML = passed
                ? `<div class="quiz-pass">ğŸ‰ æ­å–œé€šéï¼ç­”å° ${correctCount}/10 é¡Œ</div>`
                : `<div class="quiz-fail">ğŸ˜¢ æœªé€šéï¼Œç­”å° ${correctCount}/10 é¡Œï¼Œéœ€è¦ 80 åˆ†ä»¥ä¸Šæ‰èƒ½å–å¾—è­‰æ›¸</div>`;

            // æ›´æ–°æŒ‰éˆ•
            document.getElementById('submitQuizBtn').classList.add('hidden');
            document.getElementById('retryQuizBtn').classList.remove('hidden');
            if (passed) {
                document.getElementById('getCertBtn').classList.remove('hidden');
            }
        }

        function resetQuiz() {
            quizSubmitted = false;
            document.getElementById('quizResult').classList.add('hidden');
            document.getElementById('submitQuizBtn').classList.remove('hidden');
            document.getElementById('retryQuizBtn').classList.add('hidden');
            document.getElementById('getCertBtn').classList.add('hidden');
            initQuiz();
        }

        // ========== è­‰æ›¸ç”Ÿæˆç³»çµ± ==========
        function generateCertificate() {
            const name = document.getElementById('recipientName').value.trim();
            const org = document.getElementById('recipientOrg').value.trim();

            if (!name) {
                alert('è«‹è¼¸å…¥æ‚¨çš„å§“åï¼');
                return;
            }

            // å¡«å…¥è­‰æ›¸è³‡è¨Š
            document.getElementById('certName').textContent = name;
            document.getElementById('certOrg').textContent = org ? `ï¼ˆ${org}ï¼‰` : '';

            // è¨­å®šæ—¥æœŸ
            const today = new Date();
            const dateStr = `${today.getFullYear()} å¹´ ${today.getMonth() + 1} æœˆ ${today.getDate()} æ—¥`;
            document.getElementById('certDate').textContent = dateStr;

            // é¡¯ç¤ºè­‰æ›¸
            document.getElementById('certForm').classList.add('hidden');
            document.getElementById('certificateDisplay').classList.remove('hidden');
        }

        function downloadCertificate() {
            const certificate = document.getElementById('certificate');

            // ä½¿ç”¨ html2canvas åº«ï¼ˆå‹•æ…‹è¼‰å…¥ï¼‰
            if (typeof html2canvas === 'undefined') {
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
                script.onload = () => captureAndDownload(certificate);
                document.head.appendChild(script);
            } else {
                captureAndDownload(certificate);
            }
        }

        function captureAndDownload(element) {
            html2canvas(element, {
                scale: 2,
                useCORS: true,
                backgroundColor: '#fffef0'
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'NotebookLMèª²ç¨‹å®Œæˆè­‰æ›¸.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            }).catch(err => {
                console.error('è­‰æ›¸ä¸‹è¼‰å¤±æ•—:', err);
                alert('è­‰æ›¸ä¸‹è¼‰å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦æˆ–æˆªåœ–ä¿å­˜ã€‚');
            });
        }

        // åˆå§‹åŒ–æ¸¬é©—
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initQuiz, 100);
        });

        init();
    </script>
</body>
</html>
